{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/elements/VideoPlayer.vue?f247","webpack:///./src/components/OnboardingUI.vue?e9c2","webpack:///./src/components/screens/LearningScreen.vue?3f4b","webpack:///./src/components/elements/WebcamPromptCard.vue?02bc","webpack:///./src/components/elements/SegmentedProgressBar.vue?a2e6","webpack:///./src/components/elements/InstructionCarousel.vue?1366","webpack:///./src/assets/tiktokdances.jpg","webpack:///./src/App.vue?ec85","webpack:///./src/components/screens/DanceMenu.vue?2bbe","webpack:///./src/components/CameraSurface.vue?2a3a","webpack:///./src/components/DrawingSurface.vue?8ef7","webpack:///./src/components/elements/LessonCard.vue?d061","webpack:///./src/App.vue","webpack:///./src/services/WebcamProvider.ts","webpack:///./src/components/CameraSurface.vue","webpack:///./src/components/DrawingSurface.vue","webpack:///./src/services/EventHub.ts","webpack:///./src/services/MediaPipeTypes.ts","webpack:///./src/services/MediaPipe.ts","webpack:///./src/components/DrawingSurface.vue?0145","webpack:///./src/components/DrawingSurface.vue?3b98","webpack:///./src/components/CameraSurface.vue?7f23","webpack:///./src/components/CameraSurface.vue?8fa7","webpack:///./src/components/OnboardingUI.vue","webpack:///./src/components/OnboardingUI.vue?b3c5","webpack:///./src/components/OnboardingUI.vue?fcd3","webpack:///./src/components/screens/DanceMenu.vue","webpack:///./src/model/DanceEntry.ts","webpack:///./src/components/elements/LessonCard.vue","webpack:///./src/components/elements/LessonCard.vue?090b","webpack:///./src/components/elements/LessonCard.vue?8b6b","webpack:///./src/components/screens/DanceMenu.vue?3ac9","webpack:///./src/components/screens/DanceMenu.vue?9623","webpack:///./src/components/screens/LearningScreen.vue","webpack:///./src/components/elements/InstructionCarousel.vue","webpack:///./src/components/elements/InstructionCarousel.vue?eae7","webpack:///./src/components/elements/InstructionCarousel.vue?3dde","webpack:///./src/components/elements/SegmentedProgressBar.vue","webpack:///./src/components/elements/SegmentedProgressBar.vue?1c88","webpack:///./src/components/elements/SegmentedProgressBar.vue?1b9d","webpack:///./src/components/elements/PausingVideoPlayer.vue","webpack:///./src/components/elements/VideoPlayer.vue","webpack:///./src/components/elements/VideoPlayer.vue?e7d3","webpack:///./src/components/elements/VideoPlayer.vue?b67d","webpack:///./src/components/elements/PausingVideoPlayer.vue?fe03","webpack:///./src/components/elements/PausingVideoPlayer.vue?8e8a","webpack:///./src/components/screens/LearningScreen.vue?7818","webpack:///./src/components/screens/LearningScreen.vue?9387","webpack:///./src/components/elements/WebcamPromptCard.vue","webpack:///./src/components/elements/WebcamPromptCard.vue?a879","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?eabf","webpack:///./src/registerServiceWorker.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","src","alt","id","state","State","DanceMenu","danceSelected","ref","onTrackingAttained","background","OnboardingLoading","ui","LessonActive","target-dance","currentDance","target-lesson","currentLesson","goHome","PromptStartWebcam","startWebcam","StartingWebcam","LoadingTracking","Onboarding","this","mediaStream","constraints","video","facingMode","width","height","aspectRatio","frameRate","navigator","mediaDevices","getUserMedia","Error","videoE","srcObject","recorder","type","startRecording","stopRecording","url","filename","blob","getBlob","fname","file","File","WebcamProvider","xhr","console","log","onFrame","requestAnimationFrame","then","doEveryFrame","callback","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","upload","onload","open","formData","FormData","append","send","defaultProvider","enableDrawing","isActivelyTracking","mpResults","trackingResults","EventNames","freeze","gesture","trackingResultsAcquired","trackingRequested","trackingRequestFinished","GestureNames","none","pointLeft","pointRight","eventHub","setupGestureListening","callbacks","onGesture","cb","on","off","TrackingActions","requestTracking","emit","endTrackingRequest","PoseLandmarks","nose","leftEyeInner","leftEye","leftEyeOuter","rightEyeInner","rightEye","rightEyeOuter","leftEar","rightEar","mouthLeft","mouthRight","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftPinky","rightPinky","leftIndex","rightIndex","leftThumb","rightThumb","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","leftHeel","rightHeel","leftFootIndex","rightFootIndex","mp","HAND_LANDMARK_CONNECTIONS","HAND","THUMB_FINGER","INDEX_FINGER","MIDDLE_FINGER","RING_FINGER","PINKY_FINGER","CONNECTIONS_TO_DRAW","trackingStarted","DrawConnections","canvasCtx","landmarks","connections","w","canvas","h","beginPath","forEach","connection","p1","p2","moveTo","x","y","lineTo","stroke","restore","DrawPose","poseLandmarks","save","strokeStyle","lineWidth","p1a","p1b","trackingRequests","trackingCount","keys","map","filter","StartTracking","onResults","initial","holistic","Holistic","locateFile","setOptions","upperBodyOnly","smoothLandmarks","minDetectionConfidence","minTrackingConfidence","res","image","isTracking","getAngle","lm0","lm1","Math","atan2","getSum","input","reduce","a","b","averageAngle","angles","val","arr","undefined","pop","sin","cos","isLine","angleTolerance","tolerance","PI","lastAngle","thisAngle","abs","getGesture","results","rightHandLandmarks","lms","FINGERS","FINGER_LANDMARKS","indices","lm","areLines","finger","avgAngle","avgAngleDeg","drawHandShape","drawTrackingResults","enabled","detectedGesture","clearRect","props","required","Boolean","default","setup","canvasE","getContext","newVal","isEnabledNow","render","components","DrawingSurface","hasStartedTracking","hasResults","methods","startTracking","$refs","onloadedmetadata","play","sendFrame","getMediaStream","$emit","stage","OnboardingStage","TrySelectNext","TrySelectPrevious","Done","ctx","output","danceList","dance","title","hover","hovering","selectedDance","thumbnail","animatedThumb","danceLessonSelected","dances","videoSrc","lessons","lesson","_id","header","lessonTitle","__scopeId","LessonCard","sel","to","activityId","activityCount","max","activityTitle","targetDance","onTimeChanged","onActivityFinished","onPauseHit","onPauseEnded","instructions","timedInstructions","nextActivityTitle","activityFinished","segments","progressSegments","progress","videoTime","tag","inst","text","Array","segmentsData","seg","cssClass","min","style","cssClassOptions","Number","videoBaseUrl","onProgress","onSegmentPlaybackCompleted","videoUrl","resizeCanvas","onResize","offsetWidth","offsetHeight","setupCanvasResizing","videoElement","canvasElement","addEventListener","removeEventListener","setupVideoPlaying","startTime","endTime","startProgressUpdating","playVideo","from","speed","toPrecision","pause","playbackRate","currentTime","error","String","emits","prevTime","timerId","onTimeUpdated","vidElement","time","clearInterval","setInterval","setTime","DEFAULT_PAUSE_DURATION","computePlaySegments","pauses","segs","nextPauseIndex","prevIndex","pTime","pauseIndex","pi","segStartTime","VideoPlayer","videoPlayer","vidPlayer","playSegment","delaySecs","emitResume","setTimeout","playingSegments","playingSegmentIndex","playDelaySecs","nextSeg","manualResume","pauseDuration","ActivityPlayState","NotStarted","Playing","ActivityEnded","calculateProgressSegments","last","segmentBreaks","timestamp","segData","TRACKING_ID","SegmentedProgressBar","PausingVideoPlayer","InstructionCarousel","targetLesson","activityState","progressBar","activity","activities","hasNextActivity","nextActivity","pauseInstructs","instruction","mActivity","instructs","staticInstruction","startInstruction","playingInstruction","activeTimedInstructions","ti","start","end","playActivity","vidActivity","practiceSpeeds","gotoNextActivity","CameraSurface","OnboardingUI","LearningScreen","WebcamPromptCard","cameraSurface","hasCompletedOnboarding","hasStartedWebcam","camSurface","ready","registered","cached","updatefound","updated","offline","app","App","mount"],"mappings":"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","file":"js/app.72defb7d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoPlayer.vue?vue&type=style&index=0&id=debfbb4a&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OnboardingUI.vue?vue&type=style&index=0&id=28bb6c70&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LearningScreen.vue?vue&type=style&index=0&id=02c2f59a&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WebcamPromptCard.vue?vue&type=style&index=0&id=07a96404&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SegmentedProgressBar.vue?vue&type=style&index=0&id=c8cd793a&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./InstructionCarousel.vue?vue&type=style&index=0&id=f2b3d3a8&lang=scss\"","module.exports = __webpack_public_path__ + \"img/tiktokdances.589b3b61.jpg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=9efbb880&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DanceMenu.vue?vue&type=style&index=0&id=542430fd&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CameraSurface.vue?vue&type=style&index=0&id=1aca8f69&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DrawingSurface.vue?vue&type=style&index=0&id=22d8a568&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LessonCard.vue?vue&type=style&index=0&id=e9abff12&lang=scss&scoped=true\"","<template>\n<div class=\"app\">\n   <div id=\"aboveSurface\" class=\"pb-4 pt-4\">\n     <span id=\"topbarLeft\"></span>\n     <span class=\"spacer\"></span>\n     <span id=\"topbarCenter\"></span>\n     <span class=\"spacer\"></span>\n     <span id=\"topbarRight\"></span>\n\n  </div>\n\n  <DanceMenu\n        v-on:dance-selected=\"danceSelected\"\n        v-if=\"state === State.DanceMenu\"\n      />\n\n  <CameraSurface\n    ref=\"cameraSurface\"\n    @tracking-attained=\"onTrackingAttained()\"\n    v-show=\"state !== State.DanceMenu\">\n\n    <template v-slot:background>\n      <img v-show=\"state == State.OnboardingLoading\"\n      src=\"./assets/tiktokdances.jpg\"\n      alt=\"Background Image\">\n    </template>\n\n    <template v-slot:ui>\n\n      <LearningScreen v-if=\"state == State.LessonActive\"\n        :target-dance=\"currentDance\"\n        :target-lesson=\"currentLesson\"\n        @lesson-completed=\"goHome\"\n        @back-selected=\"goHome\"\n      />\n\n     <WebcamPromptCard v-if=\"state === State.PromptStartWebcam\"\n      @cancel-selected=\"state = State.DanceMenu\"\n      @startWebcamSelected=\"startWebcam\"\n     />\n\n      <div class=\"vcenter-parent\" v-if=\"state === State.StartingWebcam\">\n        <div class=\"translucent-text is-rounded\">\n          <div class=\"loader is-loading\"></div>\n        </div>\n      </div>\n\n      <div class=\"vcenter-parent\" v-if=\"state === State.LoadingTracking\">\n        <div class=\"translucent-text is-rounded\">\n          <progress class=\"loader-progress progress is-primary m-4\"></progress>\n        </div>\n      </div>\n\n      <OnboardingUI v-if=\"state == State.Onboarding\"\n        @onboarding-complete=\"state= State.LessonActive \"/>\n    </template>\n\n  </CameraSurface>\n  <div id=\"belowSurface\"></div>\n</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport webcamProvider from '@/services/WebcamProvider';\nimport CameraSurface from './components/CameraSurface.vue';\nimport OnboardingUI from './components/OnboardingUI.vue';\nimport DanceMenu from './components/screens/DanceMenu.vue';\nimport LearningScreen from './components/screens/LearningScreen.vue';\nimport DanceEntry, { LessonSelection } from './model/DanceEntry';\nimport DanceLesson from './model/DanceLesson';\nimport WebcamPromptCard from './components/elements/WebcamPromptCard.vue';\n\nconst State = {\n  DanceMenu: 'DanceMenu',\n  PromptStartWebcam: 'PromptStartWebcam',\n  StartingWebcam: 'StartingWebcam',\n  LoadingTracking: 'LoadingTracking',\n  Onboarding: 'Onboarding',\n  LessonActive: 'LessonActive',\n};\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    CameraSurface,\n    OnboardingUI,\n    DanceMenu,\n    LearningScreen,\n    WebcamPromptCard,\n  },\n  setup() {\n    const state = ref(State.DanceMenu);\n    const cameraSurface = ref(null as typeof CameraSurface | null);\n    const hasCompletedOnboarding = ref(false);\n\n    const currentDance = ref(null as DanceEntry | null);\n    const currentLesson = ref(null as DanceLesson | null);\n\n    function danceSelected(sel: LessonSelection) {\n      currentDance.value = sel.dance;\n      currentLesson.value = sel.lesson;\n\n      if (webcamProvider.hasStartedWebcam()) state.value = State.LessonActive;\n      else state.value = State.PromptStartWebcam;\n    }\n\n    function goHome() {\n      state.value = State.DanceMenu;\n      currentDance.value = null;\n      currentLesson.value = null;\n    }\n\n    async function startTracking() {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const camSurface: any = cameraSurface.value;\n      state.value = State.LoadingTracking;\n      camSurface.startTracking();\n    }\n\n    async function startWebcam() {\n      console.log('Starting Webcam');\n\n      if (!webcamProvider.hasStartedWebcam()) {\n        state.value = State.StartingWebcam;\n\n        try {\n          await webcamProvider.startWebcam();\n        } catch (e) {\n          console.error(\"Couldn't start webcam\", e);\n          return;\n        }\n      }\n\n      state.value = State.LoadingTracking;\n      try {\n        await startTracking();\n      } catch (e) {\n        console.error(\"Couldn't start tracking\", e);\n      }\n    }\n\n    function onTrackingAttained() {\n      console.log('Tracking attained');\n      if (hasCompletedOnboarding.value) {\n        state.value = State.LessonActive;\n      } else state.value = State.Onboarding;\n    }\n\n    return {\n      currentDance,\n      currentLesson,\n      danceSelected,\n      goHome,\n      startWebcam,\n      onTrackingAttained,\n      state,\n      cameraSurface,\n      State,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\nbody, html {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  background-color: #00d1b2;\n  // background-image: linear-gradient(45deg, #00d1b2 0%, #3475da 100%);\n\n  // background-color: #FF9A8B;\n  // background-image: linear-gradient(135deg, #B721FF 0%, #145eb3 100%);\n\n  background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);\n\n  background-size: 100vw 100vh;\n  background-attachment: fixed;\n}\n\n.card {\n  display: inline-block;\n  max-width: 90%;\n}\n\n.vcenter-parent {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n}\n\n.loader {\n  width: 200px;\n  height: 200px;\n}\n\n.loader-progress {\n  width: 200px;\n}\n\n#aboveSurface {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n\n  span {\n    flex: 0 0 auto;\n  }\n  .spacer {\n    flex: 1 1 0;\n  }\n\n  width: 1280px;\n  margin: auto;\n}\n\n#belowSurface {\n  width: 1280px;\n  margin: auto;\n}\n\n#topbarLeft, #topbarRight, #topbarCenter {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.background-blur {\n  backdrop-filter: blur(4px);\n  background: rgba(0, 0, 0, 0.75);\n}\n\n.translucent-text {\n  backdrop-filter: blur(4px);\n  color: white;\n  padding: 10px 20px;\n  background: rgba(0, 0, 0, 0.55);\n}\n\n.translucent-text.is-rounded {\n  border-radius: 0.25rem;\n}\n\n.is-slightly-rounded {\n  border-radius: 0.25rem;\n}\n\n</style>\n","import RecordRTC, { invokeSaveAsDialog } from 'recordrtc';\n\nexport class WebcamProvider {\n  private recorder?: RecordRTC;\n\n  private mediaStream?: MediaStream;\n\n  public async startWebcam() {\n    if (this.mediaStream) {\n      return;\n    }\n\n    const constraints: MediaStreamConstraints = {\n      video: {\n        facingMode: 'user',\n        width: 1280,\n        height: 720,\n        aspectRatio: 1.777777778,\n        frameRate: 30,\n      },\n    };\n\n    if (!navigator.mediaDevices?.getUserMedia) throw new Error(\"Browser doesn't support webcam\");\n\n    this.mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n\n  }\n\n  public hasStartedWebcam() {\n    return !!this.mediaStream;\n  }\n\n  static doEveryFrame(onFrame: () => Promise<void>) {\n    requestAnimationFrame(() => {\n      onFrame().then(() => {\n        WebcamProvider.doEveryFrame(onFrame);\n      });\n    });\n  }\n\n  public connectVideoElement(videoE: HTMLVideoElement) {\n    // eslint-disable-next-line no-param-reassign\n    videoE.srcObject = this.mediaStream as any;\n  }\n\n  public async startRecording() {\n\n    if (this.recorder) {\n      return;\n    }\n\n    if (!this.mediaStream) {\n      throw new Error('Webcam must be started before recording can happen');\n    }\n\n    // eslint-disable-next-line new-cap\n    const recorder = new RecordRTC(this.mediaStream, {\n      type: 'video',\n    });\n    recorder.startRecording();\n    this.recorder = recorder;\n\n  }\n\n  public async stopRecording() {\n    if (!this.recorder) throw new Error(\"Haven't started recording\");\n\n    await this.recorder.stopRecording();\n  }\n\n  public getMediaStream(): MediaStream | null {\n    return this.mediaStream ?? null;\n  }\n\n  public postFiles(url: string, filename: string) {\n\n    if (!this.recorder) throw new Error('Nothing to post');\n\n    const blob = this.recorder.getBlob();\n    invokeSaveAsDialog(blob, filename);\n\n    const fname = `${filename}.webm`;\n\n    const file = new File([blob], fname, {\n      type: 'video/webm',\n    });\n\n    // videoElement.src = '';\n    // videoElement.srcObject = null;\n\n    WebcamProvider.xhr(url, file, () => {\n      console.log('File successfully uploaded to server');\n    });\n\n    // if (mediaStream) { mediaStream.stop(); }\n  }\n\n  private static xhr(url: string, data: File, callback: (resText: string) => void) {\n    const request = new XMLHttpRequest();\n    request.onreadystatechange = () => {\n      if (request.readyState === 4 && request.status === 200) {\n        callback(request.responseText);\n      }\n    };\n\n    // request.upload.onprogress = (e) => {\n    //   const percent = e.loaded / e.total;\n    // };\n\n    request.upload.onload = () => {\n      console.log(`${url} upload finished`);\n    };\n\n    request.open('POST', url);\n\n    const formData = new FormData();\n    formData.append('file', data);\n    request.send(formData);\n  }\n}\n\nconst defaultProvider = new WebcamProvider();\n\nexport default defaultProvider;\n\n// function startRecording() {\n\n//   captureUserMedia((stream) => {\n//     // mediaStream = stream;\n\n//     // videoElement.srcObject = stream;\n\n//     // videoElement.play();\n//     // videoElement.muted = true;\n//     // videoElement.controls = false;\n\n//     recorder = RecordRTC(stream, {\n//       type: 'video',\n//     });\n\n//     recorder.startRecording();\n//   });\n// }\n\n// function stopRecording(postUrl, filename) {\n//   recorder.stopRecording(() => {\n//     postFiles(postUrl, filename);\n//   });\n// }\n\n// function promptSave() {\n//   const blob = recorder.getBlob();\n//   invokeSaveAsDialog(blob);\n// }\n\n// function postFiles(url, filename) {\n//   const blob = recorder.getBlob();\n//   // invokeSaveAsDialog(blob);\n\n//   var filename = `${filename}.webm`;\n\n//   const file = new File([blob], filename, {\n//     type: 'video/webm',\n//   });\n\n//   // videoElement.src = '';\n//   // videoElement.srcObject = null;\n\n//   xhr(url, file, (responseText) => {\n//     console.log('File successfully uploaded to server');\n//   });\n\n//   if (mediaStream) { mediaStream.stop(); }\n// }\n\n// function xhr(url, data, callback) {\n//   const request = new XMLHttpRequest();\n//   request.onreadystatechange = () => {\n//     if (request.readyState == 4 && request.status == 200) {\n//       callback(request.responseText);\n//     }\n//   };\n\n//   request.upload.onprogress = (e) => {\n//     const percent = e.loaded / e.total;\n//     // console.log(`${url} upload: ${percent} complete`);\n\n//     if (window.unityInstance) {\n//       unityInstance.SendMessage('Main Camera', 'UploadProgressed', percent);\n//     }\n//   };\n\n//   request.upload.onload = () => {\n//     console.log(`${url} upload finished`);\n//   };\n\n//   request.open('POST', url);\n\n//   const formData = new FormData();\n//   formData.append('file', data);\n//   request.send(formData);\n// }\n\n// function generateRandomString() {\n//   if (window.crypto) {\n//     const a = window.crypto.getRandomValues(new Uint32Array(3));\n//     let token = '';\n//     for (let i = 0, l = a.length; i < l; i++) token += a[i].toString(36);\n//     return token;\n//   }\n//   return (Math.random() * new Date().getTime()).toString(36).replace(/\\./g, '');\n\n// }\n","<template>\n  <div ref=\"canvasBackground\" class=\"surface-container is-slightly-rounded\">\n\n    <div class=\"overlay overlay-background\">\n      <slot name=\"background\"></slot>\n    </div>\n\n    <video\n      class=\"mirrored is-slightly-rounded\"\n      ref=\"videoE\"\n      width=\"1280\"\n      height=\"720\"\n    ></video>\n\n    <div class=\"overlay\">\n      <slot name=\"ui\"></slot>\n    </div>\n\n    <DrawingSurface\n    :enableDrawing=\"isActivelyTracking\"\n    :mpResults=\"trackingResults\" ref=\"drawingSurface\" class=\"overlay\"/>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport {\n  defineComponent, onUpdated, ref,\n} from 'vue';\nimport webcamProvider, { WebcamProvider } from '@/services/WebcamProvider';\nimport DrawingSurface from './DrawingSurface.vue';\nimport { isTracking as mpIsTracking, StartTracking } from '../services/MediaPipe';\n\nexport default defineComponent({\n  name: 'CameraSurface',\n  components: {\n    DrawingSurface,\n  },\n  setup() {\n    // const { enableDrawing } = toRefs(props);\n    const hasStartedTracking = ref(false);\n    const isActivelyTracking = ref(false);\n    const hasResults = ref(false);\n    const trackingResults = ref({});\n\n    onUpdated(() => {\n      isActivelyTracking.value = mpIsTracking();\n    });\n\n    return {\n      hasStartedTracking,\n      isActivelyTracking,\n      hasResults,\n      trackingResults,\n    };\n  },\n  methods: {\n    startTracking() {\n      if (this.hasStartedTracking) return;\n      this.hasStartedTracking = true;\n\n      const videoE = this.$refs.videoE as HTMLVideoElement;\n\n      videoE.onloadedmetadata = (() => {\n        videoE.play();\n\n        const sendFrame = StartTracking(\n          this.$refs.videoE as HTMLVideoElement,\n          this.onResults,\n        );\n\n        WebcamProvider.doEveryFrame(sendFrame);\n        videoE.onloadedmetadata = null;\n      });\n\n      videoE.srcObject = webcamProvider.getMediaStream();\n    },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onResults(results: any) {\n      if (!this.hasResults) {\n        this.$emit('tracking-attained');\n        console.log('Got Results', results);\n      }\n      this.hasResults = true;\n      this.trackingResults = results;\n      // this.$refs.drawingSurface.draw(results, canvasCtx);\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\n.surface-container {\n  position: relative;\n  margin: auto;\n  width: 1280px;\n  height: 720px;\n  box-sizing: content-box;\n  text-align: center;\n\n  background: rgba(0, 0, 0, 0.3);\n\n  .overlay {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n  }\n}\n\n.mirrored {\n  transform: scaleX(-1);\n}\n\n// .overlay-background {\n//   z-index: -1;\n// }\n\n</style>\n","<template>\n  <canvas ref=\"canvasE\" width=\"1280\" height=\"720\" class=\"drawCanvas\"></canvas>\n</template>\n\n<script lang=\"ts\">\n\nimport {\n  ref, defineComponent, watch, toRefs, onMounted, Ref,\n} from 'vue';\nimport eventHub, { GestureNames } from '../services/EventHub';\n\nimport { Landmark, MpHolisticResults } from '../services/MediaPipeTypes';\nimport {\n  HAND_LANDMARK_CONNECTIONS, DrawConnections, HAND, DrawPose,\n} from '../services/MediaPipe';\n// import { TinyEmitter } from 'tiny-emitter';\n\nfunction getAngle(lm0: Landmark, lm1: Landmark) {\n  return Math.atan2(lm1.y - lm0.y, lm1.x - lm0.x);\n}\n\nconst getSum = (input: Array<number>) => input.reduce((a, b) => a + b, 0);\n\nfunction averageAngle(input: Array<Landmark>): number {\n  if (input.length < 2) return 0;\n\n  const angles = input.map(\n    (val, i, arr) => (arr[i + 1] === undefined ? 0 : getAngle(arr[i], arr[i + 1])),\n  );\n  angles.pop();\n\n  const y = getSum(angles.map(Math.sin));\n  const x = getSum(angles.map(Math.cos));\n\n  return Math.atan2(y, x);\n}\n\nfunction isLine(input: Array<Landmark>, angleTolerance?: number): boolean {\n  if (input.length < 2) { return false; } // Single point: not a line\n\n  // Default the tolerance to 15 deg (on either side)\n  const tolerance = angleTolerance ?? Math.PI / 12;\n  let lastAngle = getAngle(input[0], input[1]);\n\n  // Make sure the angle is about correct\n  for (let i = 1; i < input.length - 1; i += 1) {\n    const thisAngle = getAngle(input[i], input[i + 1]);\n    if (Math.abs(thisAngle - lastAngle) >= tolerance) { return false; }\n\n    lastAngle = thisAngle;\n  }\n  return true;\n}\n\nfunction getGesture(results: MpHolisticResults): string {\n  if (!results.rightHandLandmarks) return 'none';\n  const lms = results.rightHandLandmarks;\n\n  const FINGERS = [\n    HAND.INDEX_FINGER,\n    HAND.MIDDLE_FINGER,\n    HAND.RING_FINGER,\n    HAND.PINKY_FINGER,\n  ];\n\n  const FINGER_LANDMARKS = FINGERS.map((indices) => indices.map((lm) => lms[lm]));\n\n  let areLines = true;\n  FINGER_LANDMARKS.forEach((finger) => {\n    if (!isLine(finger)) areLines = false;\n  });\n\n  const avgAngle = averageAngle(FINGER_LANDMARKS[0]);\n  const avgAngleDeg = (avgAngle * 180) / Math.PI;\n\n  const tolerance = 60;\n  if (Math.abs(avgAngleDeg) < tolerance && areLines) return GestureNames.pointLeft;\n  if (Math.abs(avgAngleDeg) > 180 - tolerance && areLines) return GestureNames.pointRight;\n\n  return GestureNames.none;\n}\n\nfunction drawHandShape(results: MpHolisticResults, canvasCtx: CanvasRenderingContext2D) {\n  if (!results.rightHandLandmarks) {\n    return;\n  }\n\n  canvasCtx.save();\n\n  /* eslint-disable no-param-reassign */\n  canvasCtx.strokeStyle = 'white';\n  canvasCtx.lineWidth = 3.0;\n\n  DrawConnections(canvasCtx, results.rightHandLandmarks, HAND_LANDMARK_CONNECTIONS);\n  canvasCtx.restore();\n}\n\nfunction drawTrackingResults(\n  enabled: boolean,\n  detectedGesture: string,\n  results: MpHolisticResults,\n  canvasCtx: CanvasRenderingContext2D,\n) {\n  const { canvas } = canvasCtx;\n  canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n  if (!enabled) return;\n  if (results.poseLandmarks) DrawPose(canvasCtx, results.poseLandmarks);\n  if (detectedGesture !== GestureNames.none) drawHandShape(results, canvasCtx);\n}\n\nexport default defineComponent({\n  name: 'DrawingSurface',\n  props: {\n    mpResults: {\n      type: Object,\n      required: false,\n    },\n    enableDrawing: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  setup(props) {\n    const { mpResults, enableDrawing } = toRefs(props);\n\n    const gesture = ref('none');\n    const canvasE = ref(null) as unknown as Ref<HTMLCanvasElement>;\n\n    onMounted(() => {\n      const canvas = canvasE.value;\n      const canvasCtx = canvas.getContext('2d') as CanvasRenderingContext2D;\n      watch(mpResults as unknown as object, (newVal) => {\n        const detectedGesture = getGesture(newVal);\n\n        drawTrackingResults(enableDrawing.value, detectedGesture, newVal, canvasCtx);\n        gesture.value = detectedGesture;\n\n        if (detectedGesture !== GestureNames.none) {\n          eventHub.emit('gesture', detectedGesture);\n        }\n      });\n    });\n\n    watch(enableDrawing, (isEnabledNow) => {\n      const canvas = canvasE.value;\n      const canvasCtx = canvas.getContext('2d') as CanvasRenderingContext2D;\n      drawTrackingResults(\n        isEnabledNow,\n        gesture.value,\n        mpResults?.value as MpHolisticResults,\n        canvasCtx,\n      );\n    });\n\n    return {\n      canvasE,\n      gesture,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\n$pointer-size: 64px;\n\n.drawCanvas {\n  transform: scaleX(-1);\n  pointer-events: none;\n}\n\n.pointer-container {\n  position: fixed;\n  // transition: top .1s, left .1s;\n\n  img {\n    position: relative;\n    left: -$pointer-size / 2;\n    top: -32px;\n    width: 64px;\n    height: 64px;\n  }\n}\n\n</style>\n","import { TinyEmitter } from 'tiny-emitter';\nimport { onMounted, onBeforeUnmount } from 'vue';\n\nexport const EventNames = Object.freeze({\n  gesture: 'gesture',\n  trackingResultsAcquired: 'trackingResultsAcquired',\n  trackingRequested: 'trackingRequested',\n  trackingRequestFinished: 'trackingRequestFinished',\n});\n\nexport const GestureNames = Object.freeze({\n  none: 'none',\n  pointLeft: 'point-left',\n  pointRight: 'point-right',\n});\n\nconst eventHub = new TinyEmitter();\n\nexport function setupGestureListening(callbacks: Record<string, () => void>) {\n  function onGesture(gesture: string) {\n    const cb = callbacks[gesture];\n    if (cb) cb();\n  }\n  onMounted(() => {\n    eventHub.on(EventNames.gesture, onGesture);\n  });\n  onBeforeUnmount(() => {\n    eventHub.off(EventNames.gesture, onGesture);\n  });\n}\n\nexport const TrackingActions = Object.freeze({\n  requestTracking: (id: string) => {\n    eventHub.emit(EventNames.trackingRequested, id);\n  },\n  endTrackingRequest: (id: string) => {\n    eventHub.emit(EventNames.trackingRequestFinished, id);\n  },\n});\n\nexport default eventHub;\n","// Inspired from https://gist.github.com/TheJLifeX/74958cc59db477a91837244ff598ef4a\n\nexport type Landmark = {\n  x: number;\n  y: number;\n  z?: number;\n  visibility?: number | null;\n}\n\nexport type MpHolisticResults = {\n  faceLandmarks?: Array<Landmark>;\n  poseLandmarks?: Array<Landmark>;\n  rightHandLandmarks?: Array<Landmark>;\n  leftHandLandmarks?: Array<Landmark>;\n}\nexport const HandLandmarks = {\n  wrist: 0,\n  thumbCMC: 1,\n  thumbMCP: 2,\n  thumbIP: 3,\n  thumbTIP: 4,\n  indexMCP: 5,\n  indexPIP: 6,\n  indexDIP: 7,\n  indexTIP: 8,\n  middleMCP: 9,\n  middlePIP: 10,\n  middleDIP: 11,\n  middleTIP: 12,\n  ringMCP: 13,\n  ringPIP: 14,\n  ringDIP: 15,\n  ringTIP: 16,\n  pinkyMCP: 17,\n  pinkyPIP: 18,\n  pinkyDIP: 19,\n  pinkyTIP: 20,\n};\n\nexport const PoseLandmarks = {\n  nose: 0,\n  leftEyeInner: 1,\n  leftEye: 2,\n  leftEyeOuter: 3,\n  rightEyeInner: 4,\n  rightEye: 5,\n  rightEyeOuter: 6,\n  leftEar: 7,\n  rightEar: 8,\n  mouthLeft: 9,\n  mouthRight: 10,\n  leftShoulder: 11,\n  rightShoulder: 12,\n  leftElbow: 13,\n  rightElbow: 14,\n  leftWrist: 15,\n  rightWrist: 16,\n  leftPinky: 17,\n  rightPinky: 18,\n  leftIndex: 19,\n  rightIndex: 20,\n  leftThumb: 21,\n  rightThumb: 22,\n  leftHip: 23,\n  rightHip: 24,\n  leftKnee: 25,\n  rightKnee: 26,\n  leftAnkle: 27,\n  rightAnkle: 28,\n  leftHeel: 29,\n  rightHeel: 30,\n  leftFootIndex: 31,\n  rightFootIndex: 32,\n};\n","/* eslint-disable @typescript-eslint/no-var-requires */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable import/prefer-default-export */\nimport { Landmark, PoseLandmarks } from './MediaPipeTypes';\nimport eventHub, { EventNames } from './EventHub';\n\nconst mp = require('@mediapipe/holistic/holistic');\n\nexport const HAND_LANDMARK_CONNECTIONS = [\n  [0, 1], [1, 2], [2, 3], [3, 4], // Thumb\n  [0, 5], [5, 6], [6, 7], [7, 8], // Index\n  [5, 9], [9, 10], [10, 11], [11, 12], // Middle\n  [9, 13], [13, 14], [14, 15], [15, 16], // Ring\n  [0, 17], [13, 17], [17, 18], [18, 19], [19, 20], // Pinky\n];\n\nexport const HAND = {\n  THUMB_FINGER: [1, 2, 3, 4],\n  INDEX_FINGER: [5, 6, 7, 8],\n  MIDDLE_FINGER: [9, 10, 11, 12],\n  RING_FINGER: [13, 14, 15, 16],\n  PINKY_FINGER: [17, 18, 19, 20],\n};\n\nconst CONNECTIONS_TO_DRAW = [\n  [PoseLandmarks.leftIndex, PoseLandmarks.leftWrist],\n  [PoseLandmarks.rightIndex, PoseLandmarks.rightWrist],\n  [PoseLandmarks.leftWrist, PoseLandmarks.leftElbow],\n  [PoseLandmarks.rightWrist, PoseLandmarks.rightElbow],\n  [PoseLandmarks.leftElbow, PoseLandmarks.leftShoulder],\n  [PoseLandmarks.rightElbow, PoseLandmarks.rightShoulder],\n  [PoseLandmarks.leftShoulder, PoseLandmarks.rightShoulder],\n  [PoseLandmarks.leftHip, PoseLandmarks.leftShoulder],\n  [PoseLandmarks.rightHip, PoseLandmarks.rightShoulder],\n  [PoseLandmarks.leftHip, PoseLandmarks.rightHip],\n  [PoseLandmarks.leftHip, PoseLandmarks.leftKnee],\n  [PoseLandmarks.rightHip, PoseLandmarks.rightKnee],\n  [PoseLandmarks.leftKnee, PoseLandmarks.leftAnkle],\n  [PoseLandmarks.rightKnee, PoseLandmarks.rightAnkle],\n  [PoseLandmarks.leftAnkle, PoseLandmarks.leftHeel],\n  [PoseLandmarks.rightAnkle, PoseLandmarks.rightHeel],\n  [PoseLandmarks.leftHeel, PoseLandmarks.leftFootIndex],\n  [PoseLandmarks.rightHeel, PoseLandmarks.rightFootIndex],\n  [PoseLandmarks.leftAnkle, PoseLandmarks.leftFootIndex],\n  [PoseLandmarks.rightAnkle, PoseLandmarks.rightFootIndex],\n  [PoseLandmarks.nose, PoseLandmarks.rightEye],\n  [PoseLandmarks.nose, PoseLandmarks.leftEye],\n];\n\nlet trackingStarted = false;\n\nexport function DrawConnections(\n  canvasCtx: CanvasRenderingContext2D,\n  landmarks: Array<Landmark>,\n  connections: Array<Array<number>>,\n) {\n  const w = canvasCtx.canvas.width;\n  const h = canvasCtx.canvas.height;\n\n  canvasCtx.beginPath();\n  connections.forEach((connection) => {\n    const p1 = landmarks[connection[0]];\n    const p2 = landmarks[connection[1]];\n\n    if (!p1 || !p2) return;\n\n    canvasCtx.moveTo(p1.x * w, p1.y * h);\n    canvasCtx.lineTo(p2.x * w, p2.y * h);\n  });\n\n  canvasCtx.stroke();\n  canvasCtx.restore();\n}\n\nexport function DrawPose(canvasCtx: CanvasRenderingContext2D, poseLandmarks: Array<Landmark>) {\n  canvasCtx.save();\n  const w = canvasCtx.canvas.width;\n  const h = canvasCtx.canvas.height;\n\n  /* eslint-disable no-param-reassign */\n  canvasCtx.strokeStyle = 'rgba(200, 200, 200, 0.1)';\n  canvasCtx.lineWidth = 4;\n  /* eslint-enable no-param-reassign */\n\n  canvasCtx.beginPath();\n  CONNECTIONS_TO_DRAW.forEach((connection) => {\n    const p1 = poseLandmarks[connection[0]];\n    const p2 = poseLandmarks[connection[1]];\n\n    if (!p1 || !p2) return;\n\n    canvasCtx.moveTo(p1.x * w, p1.y * h);\n    canvasCtx.lineTo(p2.x * w, p2.y * h);\n  });\n\n  const p1a = poseLandmarks[PoseLandmarks.leftShoulder];\n  const p1b = poseLandmarks[PoseLandmarks.rightShoulder];\n  const p2 = poseLandmarks[PoseLandmarks.nose];\n  canvasCtx.moveTo(w * 0.5 * (p1a.x + p1b.x), h * 0.5 * (p1a.y + p1b.y));\n  canvasCtx.lineTo(w * p2.x, h * p2.y);\n  canvasCtx.stroke();\n\n  canvasCtx.restore();\n}\n\nconst trackingRequests: Record<string, boolean> = {};\nconst trackingCount = () => Object\n  .keys(trackingRequests)\n  .map((id) => trackingRequests[id])\n  .filter((x) => x).length;\n\nexport function StartTracking(\n  videoE: HTMLVideoElement,\n  onResults: (res: any) => void,\n): () => Promise<void> {\n  if (trackingStarted) { throw Error('Tracking alread started'); }\n\n  trackingStarted = true;\n  trackingRequests.initial = true;\n\n  const holistic = new mp.Holistic({ locateFile: (file: any) => `https://cdn.jsdelivr.net/npm/@mediapipe/holistic@0.1/${file}` });\n  holistic.setOptions({\n    upperBodyOnly: false,\n    smoothLandmarks: true,\n    minDetectionConfidence: 0.5,\n    minTrackingConfidence: 0.5,\n  });\n  holistic.onResults((res: any) => {\n    onResults(res);\n    trackingRequests.initial = false;\n    eventHub.emit(EventNames.trackingResultsAcquired, res);\n  });\n\n  eventHub.on(EventNames.trackingRequested, (id: string) => {\n    trackingRequests[id] = true;\n  });\n  eventHub.on(EventNames.trackingRequestFinished, (id: string) => {\n    trackingRequests[id] = false;\n  });\n\n  return async () => {\n    if (trackingCount() > 0) await holistic.send({ image: videoE });\n  };\n  // camera = new camUtils.Camera(\n  //   videoE,\n  //   {\n  //     onFrame: async () => {\n  //       if (trackingCount > 0) await holistic.send({ image: videoE });\n  //     },\n  //     width: 1280,\n  //     height: 720,\n  //   },\n  // );\n  // camera.start();\n}\n\nexport function sendFrames(\n  onFrame: () => Promise<undefined>,\n) {\n\n  // Todo: don't call onFrame if video or stream is paused or\n  //       if no time has elapsed.\n  const paused = false;\n  const timeHasPassed = false;\n\n  if (paused || timeHasPassed) {\n    requestAnimationFrame(() => {\n      sendFrames(onFrame);\n    });\n  } else {\n    requestAnimationFrame(() => {\n      onFrame().then(() => {\n        sendFrames(onFrame);\n      });\n    });\n  }\n}\n\nexport function isTracking() {\n  return trackingCount() > 0;\n}\n// function removeElements(landmarks, elements) {\n//   for (const element of elements) {\n//     delete landmarks[element];\n//   }\n// }\n\n// function removeLandmarks(results) {\n//   if (results.poseLandmarks) {\n//     removeElements(\n//       results.poseLandmarks,\n//       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 15, 16, 17, 18, 19, 20, 21, 22],\n//     );\n//   }\n// }\n\n// function connect(ctx: CanvasRenderingContext2D, connectors: Array<Array<number>>) {\n//   const { canvas } = ctx;\n//   for (const connector of connectors) {\n//     const from = connector[0];\n//     const to = connector[1];\n//     if (from && to) {\n//       if (from.visibility && to.visibility\n//         && (from.visibility < 0.1 || to.visibility < 0.1)) {\n//         continue;\n//       }\n//       ctx.beginPath();\n//       ctx.moveTo(from.x * canvas.width, from.y * canvas.height);\n//       ctx.lineTo(to.x * canvas.width, to.y * canvas.height);\n//       ctx.stroke();\n//     }\n//   }\n// }\n","\n\nimport {\n  ref, defineComponent, watch, toRefs, onMounted, Ref,\n} from 'vue';\nimport eventHub, { GestureNames } from '../services/EventHub';\n\nimport { Landmark, MpHolisticResults } from '../services/MediaPipeTypes';\nimport {\n  HAND_LANDMARK_CONNECTIONS, DrawConnections, HAND, DrawPose,\n} from '../services/MediaPipe';\n// import { TinyEmitter } from 'tiny-emitter';\n\nfunction getAngle(lm0: Landmark, lm1: Landmark) {\n  return Math.atan2(lm1.y - lm0.y, lm1.x - lm0.x);\n}\n\nconst getSum = (input: Array<number>) => input.reduce((a, b) => a + b, 0);\n\nfunction averageAngle(input: Array<Landmark>): number {\n  if (input.length < 2) return 0;\n\n  const angles = input.map(\n    (val, i, arr) => (arr[i + 1] === undefined ? 0 : getAngle(arr[i], arr[i + 1])),\n  );\n  angles.pop();\n\n  const y = getSum(angles.map(Math.sin));\n  const x = getSum(angles.map(Math.cos));\n\n  return Math.atan2(y, x);\n}\n\nfunction isLine(input: Array<Landmark>, angleTolerance?: number): boolean {\n  if (input.length < 2) { return false; } // Single point: not a line\n\n  // Default the tolerance to 15 deg (on either side)\n  const tolerance = angleTolerance ?? Math.PI / 12;\n  let lastAngle = getAngle(input[0], input[1]);\n\n  // Make sure the angle is about correct\n  for (let i = 1; i < input.length - 1; i += 1) {\n    const thisAngle = getAngle(input[i], input[i + 1]);\n    if (Math.abs(thisAngle - lastAngle) >= tolerance) { return false; }\n\n    lastAngle = thisAngle;\n  }\n  return true;\n}\n\nfunction getGesture(results: MpHolisticResults): string {\n  if (!results.rightHandLandmarks) return 'none';\n  const lms = results.rightHandLandmarks;\n\n  const FINGERS = [\n    HAND.INDEX_FINGER,\n    HAND.MIDDLE_FINGER,\n    HAND.RING_FINGER,\n    HAND.PINKY_FINGER,\n  ];\n\n  const FINGER_LANDMARKS = FINGERS.map((indices) => indices.map((lm) => lms[lm]));\n\n  let areLines = true;\n  FINGER_LANDMARKS.forEach((finger) => {\n    if (!isLine(finger)) areLines = false;\n  });\n\n  const avgAngle = averageAngle(FINGER_LANDMARKS[0]);\n  const avgAngleDeg = (avgAngle * 180) / Math.PI;\n\n  const tolerance = 60;\n  if (Math.abs(avgAngleDeg) < tolerance && areLines) return GestureNames.pointLeft;\n  if (Math.abs(avgAngleDeg) > 180 - tolerance && areLines) return GestureNames.pointRight;\n\n  return GestureNames.none;\n}\n\nfunction drawHandShape(results: MpHolisticResults, canvasCtx: CanvasRenderingContext2D) {\n  if (!results.rightHandLandmarks) {\n    return;\n  }\n\n  canvasCtx.save();\n\n  /* eslint-disable no-param-reassign */\n  canvasCtx.strokeStyle = 'white';\n  canvasCtx.lineWidth = 3.0;\n\n  DrawConnections(canvasCtx, results.rightHandLandmarks, HAND_LANDMARK_CONNECTIONS);\n  canvasCtx.restore();\n}\n\nfunction drawTrackingResults(\n  enabled: boolean,\n  detectedGesture: string,\n  results: MpHolisticResults,\n  canvasCtx: CanvasRenderingContext2D,\n) {\n  const { canvas } = canvasCtx;\n  canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n  if (!enabled) return;\n  if (results.poseLandmarks) DrawPose(canvasCtx, results.poseLandmarks);\n  if (detectedGesture !== GestureNames.none) drawHandShape(results, canvasCtx);\n}\n\nexport default defineComponent({\n  name: 'DrawingSurface',\n  props: {\n    mpResults: {\n      type: Object,\n      required: false,\n    },\n    enableDrawing: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  setup(props) {\n    const { mpResults, enableDrawing } = toRefs(props);\n\n    const gesture = ref('none');\n    const canvasE = ref(null) as unknown as Ref<HTMLCanvasElement>;\n\n    onMounted(() => {\n      const canvas = canvasE.value;\n      const canvasCtx = canvas.getContext('2d') as CanvasRenderingContext2D;\n      watch(mpResults as unknown as object, (newVal) => {\n        const detectedGesture = getGesture(newVal);\n\n        drawTrackingResults(enableDrawing.value, detectedGesture, newVal, canvasCtx);\n        gesture.value = detectedGesture;\n\n        if (detectedGesture !== GestureNames.none) {\n          eventHub.emit('gesture', detectedGesture);\n        }\n      });\n    });\n\n    watch(enableDrawing, (isEnabledNow) => {\n      const canvas = canvasE.value;\n      const canvasCtx = canvas.getContext('2d') as CanvasRenderingContext2D;\n      drawTrackingResults(\n        isEnabledNow,\n        gesture.value,\n        mpResults?.value as MpHolisticResults,\n        canvasCtx,\n      );\n    });\n\n    return {\n      canvasE,\n      gesture,\n    };\n  },\n});\n","import { render } from \"./DrawingSurface.vue?vue&type=template&id=22d8a568\"\nimport script from \"./DrawingSurface.vue?vue&type=script&lang=ts\"\nexport * from \"./DrawingSurface.vue?vue&type=script&lang=ts\"\n\nimport \"./DrawingSurface.vue?vue&type=style&index=0&id=22d8a568&lang=scss\"\nscript.render = render\n\nexport default script","\n\nimport {\n  defineComponent, onUpdated, ref,\n} from 'vue';\nimport webcamProvider, { WebcamProvider } from '@/services/WebcamProvider';\nimport DrawingSurface from './DrawingSurface.vue';\nimport { isTracking as mpIsTracking, StartTracking } from '../services/MediaPipe';\n\nexport default defineComponent({\n  name: 'CameraSurface',\n  components: {\n    DrawingSurface,\n  },\n  setup() {\n    // const { enableDrawing } = toRefs(props);\n    const hasStartedTracking = ref(false);\n    const isActivelyTracking = ref(false);\n    const hasResults = ref(false);\n    const trackingResults = ref({});\n\n    onUpdated(() => {\n      isActivelyTracking.value = mpIsTracking();\n    });\n\n    return {\n      hasStartedTracking,\n      isActivelyTracking,\n      hasResults,\n      trackingResults,\n    };\n  },\n  methods: {\n    startTracking() {\n      if (this.hasStartedTracking) return;\n      this.hasStartedTracking = true;\n\n      const videoE = this.$refs.videoE as HTMLVideoElement;\n\n      videoE.onloadedmetadata = (() => {\n        videoE.play();\n\n        const sendFrame = StartTracking(\n          this.$refs.videoE as HTMLVideoElement,\n          this.onResults,\n        );\n\n        WebcamProvider.doEveryFrame(sendFrame);\n        videoE.onloadedmetadata = null;\n      });\n\n      videoE.srcObject = webcamProvider.getMediaStream();\n    },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onResults(results: any) {\n      if (!this.hasResults) {\n        this.$emit('tracking-attained');\n        console.log('Got Results', results);\n      }\n      this.hasResults = true;\n      this.trackingResults = results;\n      // this.$refs.drawingSurface.draw(results, canvasCtx);\n    },\n  },\n});\n","import { render } from \"./CameraSurface.vue?vue&type=template&id=1aca8f69\"\nimport script from \"./CameraSurface.vue?vue&type=script&lang=ts\"\nexport * from \"./CameraSurface.vue?vue&type=script&lang=ts\"\n\nimport \"./CameraSurface.vue?vue&type=style&index=0&id=1aca8f69&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"onboardingUI\">\n    <div class=\"vcenter-parent\">\n      <div class=\"content translucent-text is-rounded p-6\">\n        <h3 class=\"has-text-white\">Here's how to use this app</h3>\n\n        <span v-show=\"stage == 0\">\n          <p>Point forward with a flat hand to proceed</p>\n          <span class=\"icon is-large\" >\n            <i class=\"fas fa-2x fa-hand-paper fa-rotate-90\"></i>\n          </span>\n        </span>\n\n        <span v-show=\"stage == 1\">\n          <p>Point to the left with a flat hand to go backwards</p>\n          <span class=\"icon is-large fa-flip-horizontal\" v-show=\"stage == 1\">\n            <i class=\"fas fa-2x fa-hand-paper fa-rotate-90\"></i>\n          </span>\n        </span>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\n\nimport {\n  defineComponent, onBeforeUnmount, onMounted, ref,\n} from 'vue';\n\nimport { setupGestureListening, GestureNames, TrackingActions } from '../services/EventHub';\n\nconst OnboardingStage = {\n  TrySelectNext: 0,\n  TrySelectPrevious: 1,\n  Done: 2,\n};\n\nexport default defineComponent({\n  name: 'OnboardingUI',\n  setup(props, ctx) {\n    const stage = ref(OnboardingStage.TrySelectNext);\n    const output = ref('');\n\n    onMounted(() => {\n      TrackingActions.requestTracking('onboarding');\n    });\n    onBeforeUnmount(() => {\n      TrackingActions.endTrackingRequest('onboarding');\n    });\n\n    setupGestureListening({\n      [GestureNames.pointRight]: () => {\n        if (stage.value === OnboardingStage.TrySelectNext) {\n          stage.value = OnboardingStage.TrySelectPrevious;\n        }\n      },\n      [GestureNames.pointLeft]: () => {\n        if (stage.value === OnboardingStage.TrySelectPrevious) {\n          stage.value = OnboardingStage.Done;\n          ctx.emit('onboarding-complete');\n        }\n      },\n    });\n\n    return {\n      stage,\n      output,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\n.onboardingUI {\n  width: 100%;\n  height: 100%;\n}\n\n</style>\n","\n\nimport {\n  defineComponent, onBeforeUnmount, onMounted, ref,\n} from 'vue';\n\nimport { setupGestureListening, GestureNames, TrackingActions } from '../services/EventHub';\n\nconst OnboardingStage = {\n  TrySelectNext: 0,\n  TrySelectPrevious: 1,\n  Done: 2,\n};\n\nexport default defineComponent({\n  name: 'OnboardingUI',\n  setup(props, ctx) {\n    const stage = ref(OnboardingStage.TrySelectNext);\n    const output = ref('');\n\n    onMounted(() => {\n      TrackingActions.requestTracking('onboarding');\n    });\n    onBeforeUnmount(() => {\n      TrackingActions.endTrackingRequest('onboarding');\n    });\n\n    setupGestureListening({\n      [GestureNames.pointRight]: () => {\n        if (stage.value === OnboardingStage.TrySelectNext) {\n          stage.value = OnboardingStage.TrySelectPrevious;\n        }\n      },\n      [GestureNames.pointLeft]: () => {\n        if (stage.value === OnboardingStage.TrySelectPrevious) {\n          stage.value = OnboardingStage.Done;\n          ctx.emit('onboarding-complete');\n        }\n      },\n    });\n\n    return {\n      stage,\n      output,\n    };\n  },\n});\n","import { render } from \"./OnboardingUI.vue?vue&type=template&id=28bb6c70\"\nimport script from \"./OnboardingUI.vue?vue&type=script&lang=ts\"\nexport * from \"./OnboardingUI.vue?vue&type=script&lang=ts\"\n\nimport \"./OnboardingUI.vue?vue&type=style&index=0&id=28bb6c70&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <section class=\"section dance-menu\">\n    <div class=\"container content has-text-centered is-hidden-mobile\">\n      <h2 class=\"subtitle\">Which dance would you like to learn?</h2>\n    </div>\n    <div class=\"menu container padded\">\n      <div\n        class=\"dance-card card is-clickable\"\n        v-for=\"dance in danceList\"\n        :key=\"dance.title\"\n        @mouseover=\"hover = dance.hovering = true\"\n        @mouseleave=\"hover = dance.hovering = false\"\n        @click=\"selectedDance = dance\"\n      >\n        <div class=\"card-image\">\n          <figure class=\"image is-2by3\">\n            <img v-show=\"!dance.hovering\" :src=\"dance.thumbnail\" alt=\"\" />\n            <img v-show=\"dance.hovering\" :src=\"dance.animatedThumb\" alt=\"\" />\n          </figure>\n        </div>\n        <div class=\"card-content\">\n          {{ dance.title }}\n        </div>\n      </div>\n    </div>\n\n    <div v-bind:class=\"{ 'is-active': selectedDance }\" class=\"modal\">\n      <div class=\"modal-background\"></div>\n      <div class=\"modal-content\">\n        <LessonCard\n          v-bind:dance=\"selectedDance\"\n          v-on:closed=\"selectedDance = null\"\n          v-on:lesson-selected=\"danceLessonSelected\"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\nimport DanceEntry, { LessonSelection, dances } from '../../model/DanceEntry';\nimport LessonCard from '../elements/LessonCard.vue';\n\nexport default defineComponent({\n  name: 'DanceMenu',\n  components: {\n    LessonCard,\n  },\n  setup(props, ctx) {\n    const danceList = ref(dances);\n    const selectedDance = ref(null as DanceEntry | null);\n\n    function danceLessonSelected(sel: LessonSelection) {\n      ctx.emit('dance-selected', sel);\n      selectedDance.value = null;\n    }\n\n    return {\n      selectedDance,\n      danceList,\n      danceLessonSelected,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n// .dance-menu {\n  // backdrop-filter: blur(4px);\n  // background: rgba(0, 0, 0, 0.2);\n// }\n\n.menu {\n  text-align: left;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  grid-gap: 0.5em;\n}\n.menu .card {\n  display: block;\n}\n.dance-card {\n  height: max-content;\n  transition: transform 0.2s, box-shadow 0.2s;\n\n  &:hover {\n    box-shadow: 0 0.5em 1em -0.125em rgba(10, 10, 10, 0.3),\n      0 0 0 2px rgba(10, 10, 10, 0.05);\n    transform: scale(0.98);\n  }\n}\n\nimg {\n  object-fit: fill;\n}\n\n.subtitle {\n  margin: 2rem 1rem 2em;\n  color: white;\n}\n\n.section {\n  padding: 1.5rem;\n}\n</style>\n","import DanceLesson from './DanceLesson';\n/* eslint-disable */\n\nimport renegadeLesson from './lessons/renegade.lesson.json';\nimport itsafitLesson from './lessons/itsafit.lesson.json';\nimport deruloLesson from './lessons/derulo.lesson.json';\nimport unhhunhLesson from './lessons/unhhunh.lesson.json';\n\n\nexport default interface DanceEntry {\n  title: string;\n  videoSrc: string;\n  thumbnail: string;\n  animatedThumb: string;\n  hovering: boolean;\n  lessons: Array<DanceLesson>;\n}\n\nexport interface LessonSelection {\n  dance: DanceEntry;\n  lesson: DanceLesson;\n}\n\nexport const dances: Array<DanceEntry> = [\n  {\n    title: 'Renegade',\n    videoSrc: 'dances/renegade.mp4',\n    thumbnail: 'dances/renegade.jpg',\n    animatedThumb: 'dances/renegade.gif',\n    hovering: false,\n    lessons: [\n      renegadeLesson as DanceLesson,\n    ],\n  },\n  {\n    title: 'Unh Hunhh',\n    videoSrc: 'dances/unhhunh.mp4',\n    thumbnail: 'dances/unhhunh.jpg',\n    animatedThumb: 'dances/unhhunh.gif',\n    hovering: false,\n    lessons: [\n      unhhunhLesson as DanceLesson\n    ],\n  },\n  {\n    title: 'Derulo',\n    videoSrc: 'dances/derulo.mp4',\n    thumbnail: 'null',\n    animatedThumb: 'null',\n    hovering: false,\n    lessons: [\n      deruloLesson as DanceLesson\n    ],\n  },\n  {\n    title: \"It's a fit\",\n    videoSrc: 'dances/itsafit.mp4',\n    thumbnail: 'null',\n    animatedThumb: 'null',\n    hovering: false,\n    lessons: [\n      itsafitLesson as DanceLesson\n    ],\n  }\n];\n","<template>\n  <div class=\"card\" v-if=\"dance\">\n    <div class=\"card-header\">\n      <h4 class=\"card-header-title\">\n        {{ dance.title }}\n      </h4>\n\n      <a class=\"card-header-icon\" @click=\"$emit('closed')\">\n        <i class=\"fas fa-times\"></i>\n      </a>\n    </div>\n    <div class=\"card-content\">\n      <div class=\"columns\">\n        <div class=\"column is-narrow is-hidden-mobile\">\n          <img :src=\"dance.animatedThumb\" :alt=\"dance.title\" class=\"dance-image\" />\n        </div>\n        <div class=\"column\">\n          <ul class=\"menu-list\">\n            <li v-for=\"lesson in dance.lessons\" :key=\"lesson._id\">\n              <a @click=\"$emit('lesson-selected', {dance: dance, lesson: lesson})\">\n                {{ lesson.header.lessonTitle }}\n              </a>\n            </li>\n          </ul>\n\n          <p v-if=\"dance.lessons.length == 0\">No lessons available.</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'LessonCard',\n  props: ['dance'],\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n.dance-image {\n  max-height: 50vh;\n}\n\n</style>\n","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'LessonCard',\n  props: ['dance'],\n});\n","import { render } from \"./LessonCard.vue?vue&type=template&id=e9abff12&scoped=true\"\nimport script from \"./LessonCard.vue?vue&type=script&lang=ts\"\nexport * from \"./LessonCard.vue?vue&type=script&lang=ts\"\n\nimport \"./LessonCard.vue?vue&type=style&index=0&id=e9abff12&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-e9abff12\"\n\nexport default script","\nimport { defineComponent, ref } from 'vue';\nimport DanceEntry, { LessonSelection, dances } from '../../model/DanceEntry';\nimport LessonCard from '../elements/LessonCard.vue';\n\nexport default defineComponent({\n  name: 'DanceMenu',\n  components: {\n    LessonCard,\n  },\n  setup(props, ctx) {\n    const danceList = ref(dances);\n    const selectedDance = ref(null as DanceEntry | null);\n\n    function danceLessonSelected(sel: LessonSelection) {\n      ctx.emit('dance-selected', sel);\n      selectedDance.value = null;\n    }\n\n    return {\n      selectedDance,\n      danceList,\n      danceLessonSelected,\n    };\n  },\n});\n","import { render } from \"./DanceMenu.vue?vue&type=template&id=542430fd&scoped=true\"\nimport script from \"./DanceMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./DanceMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./DanceMenu.vue?vue&type=style&index=0&id=542430fd&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-542430fd\"\n\nexport default script","<template>\n  <div class=\"learning-screen background-blur\"\n    >\n    <teleport to=\"#topbarLeft\">\n      <button class=\"button\" @click=\"$emit('back-selected')\">&lt; Back</button>\n    </teleport>\n    <teleport to=\"#topbarRight\">\n      <span class=\"tag\">{{activityId}} / {{activityCount}}</span>\n      <progress class=\"lessonProgress progress ml-2\" :max=\"activityCount\" :value=\"activityId\">\n      </progress>\n    </teleport>\n    <teleport to=\"#topbarCenter\">\n        <h3>{{activityTitle}}</h3>\n    </teleport>\n\n    <PausingVideoPlayer\n      :videoSrc=\"targetDance.videoSrc\"\n      :height=\"'720px'\"\n      ref=\"videoPlayer\"\n      @progress=\"onTimeChanged\"\n      @playback-completed=\"onActivityFinished\"\n      @pause-hit=\"onPauseHit\"\n      @pause-end=\"onPauseEnded\"\n    />\n\n    <div class=\"overlay instructions-overlay mb-4\">\n      <InstructionCarousel :instructions=\"instructions\" class=\"m-2\"/>\n      <InstructionCarousel :instructions=\"timedInstructions\" class=\"m-2\"/>\n    </div>\n\n    <div class=\"vcenter-parent overlay\" v-show=\"activityFinished\">\n      <div class=\"content translucent-text p-6 is-rounded is-size-5\">\n        <h3 class=\"has-text-white\">Use a gesture to proceed</h3>\n        <div class=\"columns\">\n            <div class=\"column\">\n              <p class=\"mt-4 mb-0\">Repeat</p>\n              <span class=\"icon is-large fa-flip-horizontal\">\n                <i class=\"fas fa-2x fa-hand-paper fa-rotate-90\"></i>\n              </span>\n              <br>\n              <p class=\"mt-4 has-text-grey-lighter\">{{activityTitle}}</p>\n            </div>\n            <div class=\"column\">\n              <p class=\"mt-4 mb-0\">Next</p>\n              <span class=\"icon is-large\" >\n                <i class=\"fas fa-2x fa-hand-paper fa-rotate-90\"></i>\n              </span>\n              <br>\n              <p class=\"mt-4 has-text-grey-lighter\">{{nextActivityTitle}}</p>\n            </div>\n          </div>\n      </div>\n    </div>\n\n    <teleport to=\"#belowSurface\">\n      <div>\n        <div class=\"master-bar mt-4\">\n          <SegmentedProgressBar\n            :segments=\"progressSegments\"\n            :progress=\"videoTime\"\n            ref=\"progressBar\"\n          />\n        </div>\n      </div>\n    </teleport>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport DanceLesson, { PauseInfo } from '@/model/DanceLesson';\nimport {\n  computed, defineComponent, onBeforeUnmount, onMounted, ref, toRefs,\n} from 'vue';\nimport { GestureNames, setupGestureListening, TrackingActions } from '@/services/EventHub';\nimport DanceEntry from '@/model/DanceEntry';\nimport InstructionCarousel, { Instruction } from '@/components/elements/InstructionCarousel.vue';\nimport SegmentedProgressBar, { ProgressSegmentData } from '../elements/SegmentedProgressBar.vue';\nimport PausingVideoPlayer from '../elements/PausingVideoPlayer.vue';\n\nconst ActivityPlayState = Object.freeze({\n  NotStarted: 'NotStarted',\n  Playing: 'Playing',\n  ActivityEnded: 'ActivityEnded',\n});\n\n//\n// TODO!\n//   * Update segment breaks in activity to have the first activity\n//     start time and the last activity end time.\n//\n\nfunction calculateProgressSegments(dance: DanceEntry, lesson: DanceLesson) {\n  if (!lesson) return [];\n\n  let last = undefined as undefined | number;\n  const segs = lesson.segmentBreaks.map((timestamp) => {\n    let segData = undefined as undefined | ProgressSegmentData;\n    if (last !== undefined) {\n      segData = {\n        min: last,\n        max: timestamp,\n        enabled: true,\n      };\n    }\n    last = timestamp;\n    return segData;\n  }).filter((x) => x !== undefined);\n\n  return segs;\n}\n\nconst TRACKING_ID = 'LearningScreen';\n\nexport default defineComponent({\n  components: {\n    SegmentedProgressBar,\n    PausingVideoPlayer,\n    InstructionCarousel,\n  },\n  props: {\n    targetDance: Object,\n    targetLesson: Object,\n  },\n  setup(props, { emit }) {\n    const { targetLesson, targetDance } = toRefs(props);\n\n    const activityState = ref(ActivityPlayState.NotStarted);\n\n    const videoPlayer = ref(null as null | typeof PausingVideoPlayer);\n    const videoTime = ref(0);\n\n    const progressBar = ref(null as null | typeof SegmentedProgressBar);\n\n    const activityId = ref(0);\n    const activity = computed(() => {\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n      return lesson?.activities[activityId.value];\n    });\n    const activityTitle = computed(() => activity.value?.title ?? '');\n    const activityCount = computed(() => {\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n      return lesson?.activities?.length ?? 0;\n    });\n    const hasNextActivity = computed(() => activityCount.value > activityId.value + 1);\n    // eslint-disable-next-line max-len\n    const activityFinished = computed(() => activityState.value === ActivityPlayState.ActivityEnded);\n    const nextActivityTitle = computed(() => {\n      if (!hasNextActivity.value) return 'Finish Lesson';\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n\n      const nextActivity = lesson?.activities[activityId.value + 1];\n      return nextActivity?.title ?? 'Unknown';\n    });\n\n    const pauseInstructs = ref([] as Instruction[]);\n    function onPauseHit(pause: PauseInfo) {\n      if (pause.instruction) {\n        pauseInstructs.value.push({\n          id: pause.time,\n          text: pause.instruction,\n        });\n      }\n    }\n    function onPauseEnded() {\n      // Remove all pause instructions\n      pauseInstructs.value.splice(0);\n    }\n\n    const instructions = computed(() => {\n      const mActivity = activity.value;\n      const state = activityState.value;\n      if (!mActivity) return [];\n\n      const instructs: Instruction[] = [];\n\n      if (mActivity.staticInstruction) {\n        instructs.push({\n          id: 0,\n          text: mActivity.staticInstruction,\n        });\n      }\n\n      if (state === ActivityPlayState.NotStarted && mActivity.startInstruction) {\n        instructs.push({\n          id: 1,\n          text: mActivity.startInstruction,\n        });\n      } else if (state !== ActivityPlayState.NotStarted && mActivity.playingInstruction) {\n        instructs.push({\n          id: 2,\n          text: mActivity.playingInstruction,\n        });\n      }\n\n      return instructs;\n    });\n    const timedInstructions = computed(() => {\n      const mActivity = activity.value;\n      const time = videoTime.value;\n      if (!mActivity) return [];\n\n      const activeTimedInstructions = mActivity.timedInstructions?.map(\n        (ti, i) => ({\n          id: i,\n          text: ti.text,\n          start: ti.startTime,\n          end: ti.endTime,\n        })\n      ).filter((ti) => ti.start <= time && time < ti.end) ?? [];\n\n      return activeTimedInstructions;\n    });\n\n    const progressSegments = computed(() => {\n      const lesson = targetLesson?.value as DanceLesson | undefined;\n      const dance = targetDance?.value as DanceEntry | undefined;\n      if (lesson && dance) return calculateProgressSegments(dance, lesson);\n      return [];\n    });\n\n    function playActivity() {\n      console.log(`LEARNING SCREEN:: Starting playback (activityId: ${activityId.value})`);\n      activityState.value = ActivityPlayState.Playing;\n      const vidPlayer = videoPlayer.value;\n      const vidActivity = activity.value;\n      if (!vidPlayer || !vidActivity) {\n        console.error('LEARNING SCREEN:: Aborting video playback: videoElement or lessonActivity is null', vidPlayer, vidActivity);\n        return;\n      }\n\n      vidPlayer.play(\n        vidActivity.startTime,\n        vidActivity.endTime,\n        (vidActivity.practiceSpeeds ?? [1])[0] ?? 1,\n        vidActivity.pauses ?? [],\n        1.5,\n      );\n    }\n\n    function gotoNextActivity() {\n      activityState.value = ActivityPlayState.NotStarted;\n      if (!hasNextActivity.value) {\n        emit('lesson-completed');\n        return;\n      }\n      activityId.value += 1;\n      setTimeout(() => { playActivity(); }, 1000);\n    }\n\n    function onActivityFinished() {\n      activityState.value = ActivityPlayState.ActivityEnded;\n      console.log('LEARNING SCREEN:: Activity finished. Requesting tracking...');\n      TrackingActions.requestTracking(TRACKING_ID);\n    }\n\n    setupGestureListening({\n      [GestureNames.pointRight]: () => {\n        TrackingActions.endTrackingRequest(TRACKING_ID);\n        if (!activityFinished.value) return;\n        gotoNextActivity();\n      },\n      [GestureNames.pointLeft]: () => {\n        TrackingActions.endTrackingRequest(TRACKING_ID);\n        if (!activityFinished.value) return;\n        playActivity();\n      },\n    });\n    onBeforeUnmount(() => {\n      TrackingActions.endTrackingRequest(TRACKING_ID);\n    });\n    // Todo: quit tracking request when component unmounted. (perhaps\n    //       refactor tracking requests to have an id)\n\n    function onTimeChanged(time: number) {\n      videoTime.value = time;\n    }\n\n    onMounted(() => {\n      setTimeout(() => {\n        playActivity();\n      }, 1000);\n    });\n\n    return {\n      activityState,\n      progressSegments,\n      activity,\n      activityId,\n      activityCount,\n      activityTitle,\n      nextActivityTitle,\n      instructions,\n      timedInstructions,\n      videoPlayer,\n      progressBar,\n      activityFinished,\n      videoTime,\n      onActivityFinished,\n      onTimeChanged,\n\n      onPauseHit,\n      onPauseEnded,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\n.learning-screen {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n\n.master-bar {\n  width: 1280px;\n  // margin: 0 auto;\n  // padding: 1rem 1rem 1rem 1rem;\n  // border-radius: 0 0 0.5rem 0.5rem;\n}\n\n.instructions-overlay {\n  display: flex;\n  flex-direction: column-reverse;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.lessonProgress {\n  width: 128px;\n}\n</style>\n","<template>\n  <transition-group name=\"slide-fade\" tag=\"div\" class=\"instructionCarousel is-size-4\">\n    <p\n      class=\"translucent-text instruction\"\n      v-for=\"inst in instructions\"\n      :key=\"inst.id\">{{inst.text}}</p>\n  </transition-group>\n</template>\n\n<script lang=\"ts\">\n\nimport { defineComponent } from 'vue';\n\nexport type Instruction = {\n  id: number;\n  text: string;\n}\n\nexport default defineComponent({\n  props: {\n    instructions: {\n      type: Array,\n      default: Array,\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n\n.instructionCarousel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.instruction {\n  border-radius: 20000px;\n  font-weight: bold;\n}\n\n/* Enter and leave animations can use different */\n/* durations and timing functions.              */\n.slide-fade-enter-active {\n  transition: all .15s ease;\n  overflow: hidden;\n  // transform: translateX(-100%);\n}\n.slide-fade-leave-active {\n  transition: all .15s ease;\n  overflow: clip;\n  // transform: translateX(-100%);\n}\n.slide-fade-enter, .slide-fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateX(10px) scaleX(0);\n  opacity: 0;\n}\n\n</style>\n","\n\nimport { defineComponent } from 'vue';\n\nexport type Instruction = {\n  id: number;\n  text: string;\n}\n\nexport default defineComponent({\n  props: {\n    instructions: {\n      type: Array,\n      default: Array,\n    },\n  },\n});\n","import { render } from \"./InstructionCarousel.vue?vue&type=template&id=f2b3d3a8\"\nimport script from \"./InstructionCarousel.vue?vue&type=script&lang=ts\"\nexport * from \"./InstructionCarousel.vue?vue&type=script&lang=ts\"\n\nimport \"./InstructionCarousel.vue?vue&type=style&index=0&id=f2b3d3a8&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"segmented-progress-bar\">\n    <progress\n      v-for=\"seg in segmentsData\"\n      :key=\"seg.id\"\n      :class=\"[{ 'is-disabled': !seg.enabled}, seg.cssClass]\"\n      class=\"progress is-large\"\n      :max=\"seg.max - seg.min\"\n      :value=\"progress - seg.min\"\n      :style=\"{ 'flex-grow': (seg.max - seg.min) }\"\n    ></progress>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, toRefs } from 'vue';\n\nexport interface ProgressSegmentData {\n  min: number;\n  max: number;\n  enabled: boolean;\n}\n\nconst cssClassOptions = [\n  'is-info',\n  'is-success',\n  'is-warning',\n  'is-primary',\n  'is-danger',\n];\n\nexport default defineComponent({\n  name: 'SegmentedProgressBar',\n  props: {\n    segments: {\n      default: Array,\n      type: Array,\n    },\n    progress: {\n      default: 0,\n      type: Number,\n    },\n  },\n  setup(props) {\n    const {\n      segments,\n    } = toRefs(props);\n\n    const segmentsData = computed(\n      () => segments.value.map(\n        (seg, i) => ({\n          id: i,\n          cssClass: cssClassOptions[i % cssClassOptions.length],\n          ...(seg as ProgressSegmentData),\n        }),\n      ),\n    );\n\n    return {\n      segmentsData,\n    };\n  },\n});\n\n</script>\n\n<style lang=\"scss\">\n.segmented-progress-bar {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n\n  progress.progress {\n    flex-basis: 10px;\n    margin-bottom: auto;\n    // border: 2px solid #BBB;\n\n    -webkit-appearance: none;\n    appearance: none;\n\n    &.is-disabled::-webkit-progress-bar,\n    &.is-disabled {\n      background: #888;\n    }\n\n    &.is-disabled::-moz-progress-bar,\n    &.is-disabled::-webkit-progress-value,\n    &.is-disabled::-ms-fill {\n      background: #888;\n    }\n  }\n}\n</style>\n","\nimport { defineComponent, computed, toRefs } from 'vue';\n\nexport interface ProgressSegmentData {\n  min: number;\n  max: number;\n  enabled: boolean;\n}\n\nconst cssClassOptions = [\n  'is-info',\n  'is-success',\n  'is-warning',\n  'is-primary',\n  'is-danger',\n];\n\nexport default defineComponent({\n  name: 'SegmentedProgressBar',\n  props: {\n    segments: {\n      default: Array,\n      type: Array,\n    },\n    progress: {\n      default: 0,\n      type: Number,\n    },\n  },\n  setup(props) {\n    const {\n      segments,\n    } = toRefs(props);\n\n    const segmentsData = computed(\n      () => segments.value.map(\n        (seg, i) => ({\n          id: i,\n          cssClass: cssClassOptions[i % cssClassOptions.length],\n          ...(seg as ProgressSegmentData),\n        }),\n      ),\n    );\n\n    return {\n      segmentsData,\n    };\n  },\n});\n\n","import { render } from \"./SegmentedProgressBar.vue?vue&type=template&id=c8cd793a\"\nimport script from \"./SegmentedProgressBar.vue?vue&type=script&lang=ts\"\nexport * from \"./SegmentedProgressBar.vue?vue&type=script&lang=ts\"\n\nimport \"./SegmentedProgressBar.vue?vue&type=style&index=0&id=c8cd793a&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <VideoPlayer\n    :height=\"'720px'\"\n    ref=\"videoPlayer\"\n    :videoBaseUrl=\"videoSrc\"\n    @progress=\"onProgress\"\n    @playback-completed=\"onSegmentPlaybackCompleted\"\n    />\n</template>\n\n<script lang=\"ts\">\n\nimport { PauseInfo } from '@/model/DanceLesson';\nimport { defineComponent, ref } from 'vue';\nimport VideoPlayer from './VideoPlayer.vue';\n\nconst DEFAULT_PAUSE_DURATION = 1.5;\n\ntype PlaySegment = {\n  from: number;\n  to: number;\n  speed: number;\n  pause: PauseInfo | null;\n}\nfunction computePlaySegments(from: number, to: number, speed: number, pauses: PauseInfo[]) {\n  const segs: PlaySegment[] = [];\n\n  function nextPauseIndex(prevIndex: number): number {\n    const pTime = Math.max((pauses[prevIndex]?.time ?? 0), from);\n    let pauseIndex = prevIndex + 1;\n    for (; pauseIndex < pauses.length; pauseIndex += 1) {\n      const pi = pauses[pauseIndex];\n      if (pi.time > pTime) break;\n    }\n    return pauseIndex;\n  }\n\n  let segStartTime = from;\n  let pauseIndex = nextPauseIndex(-1);\n  while (pauseIndex < pauses.length) {\n    segs.push({\n      from: segStartTime,\n      to: pauses[pauseIndex].time,\n      speed,\n      pause: pauses[pauseIndex],\n    });\n    segStartTime = pauses[pauseIndex].time;\n    pauseIndex = nextPauseIndex(pauseIndex);\n  }\n  segs.push({\n    from: segStartTime,\n    to,\n    speed,\n    pause: null,\n  });\n\n  return segs;\n}\n\nexport default defineComponent({\n  name: 'PausingVideoPlayer',\n  components: { VideoPlayer },\n  props: {\n    videoSrc: {\n      default: '',\n    },\n  },\n  emits: ['playback-completed', 'progress', 'pause-hit', 'pause-end'],\n  setup(props, { emit }) {\n    const videoPlayer = ref(null as null | typeof VideoPlayer);\n\n    function setTime(time: number) {\n      const vidPlayer = videoPlayer.value;\n      if (vidPlayer) vidPlayer.setTime(time);\n      emit('progress', time);\n    }\n\n    function onProgress(time: number) {\n      emit('progress', time);\n    }\n\n    function playSegment(seg: PlaySegment, delaySecs: number, emitResume?: boolean) {\n      const vidPlayer = videoPlayer.value;\n      if (!vidPlayer) return;\n\n      vidPlayer.setTime(seg.from);\n      setTimeout(() => {\n        if (emitResume) {\n          emit('pause-end');\n        }\n        vidPlayer.playVideo(seg.from, seg.to, seg.speed);\n      }, 1000 * delaySecs);\n    }\n\n    let playingSegments: PlaySegment[] = [];\n    let playingSegmentIndex = 0;\n\n    function play(\n      from: number,\n      to: number,\n      speed: number,\n      pauses: Array<PauseInfo>,\n      playDelaySecs: number,\n    ) {\n      setTime(from);\n      playingSegments = computePlaySegments(from, to, speed, pauses);\n      playingSegmentIndex = 0;\n\n      playSegment(playingSegments[playingSegmentIndex], playDelaySecs);\n    }\n    function onSegmentPlaybackCompleted() {\n      const { pause } = playingSegments[playingSegmentIndex];\n      playingSegmentIndex += 1;\n      if (playingSegmentIndex >= playingSegments.length) {\n        emit('playback-completed');\n        return;\n      }\n\n      if (!pause) throw new Error('Expected there to be a pause obj');\n      const nextSeg = playingSegments[playingSegmentIndex];\n\n      emit('pause-hit', pause);\n      const manualResume = pause.manualResume ?? false;\n      if (!manualResume) {\n        playSegment(nextSeg, pause.pauseDuration ?? DEFAULT_PAUSE_DURATION, true);\n      }\n    }\n\n    return {\n      videoPlayer,\n      setTime,\n      onProgress,\n      onSegmentPlaybackCompleted,\n      play,\n    };\n  },\n});\n</script>\n\n<style>\n\n</style>\n","<template>\n  <div\n    class=\"is-relative video-player-container\"\n    :style=\"{\n      width: width,\n      height: height,\n    }\"\n  >\n    <video\n      :src=\"videoUrl\"\n      :style=\"{\n        width: width,\n        height: height,\n      }\"\n      ref=\"videoElement\"\n      v-on:loadedmetadata=\"resizeCanvas\"\n    ></video>\n    <canvas class=\"is-overlay\" ref=\"canvasElement\"> </canvas>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  toRefs,\n  onMounted,\n  onBeforeUnmount,\n  ref,\n  nextTick,\n  Ref,\n} from 'vue';\n\nfunction onResize(canvasE: HTMLCanvasElement, videoE: HTMLVideoElement) {\n  nextTick(() => {\n    if (!canvasE || !videoE) return;\n\n    // eslint-disable-next-line no-param-reassign\n    if (canvasE.width !== videoE.offsetWidth) canvasE.width = videoE.offsetWidth;\n    // eslint-disable-next-line no-param-reassign\n    if (canvasE.height !== videoE.offsetHeight) canvasE.height = videoE.offsetHeight;\n  });\n}\n\nfunction setupCanvasResizing(\n  videoElement: Ref<null | HTMLVideoElement>,\n  canvasElement: Ref<null | HTMLCanvasElement>,\n) {\n  function resizeCanvas() {\n    const videoE = videoElement.value;\n    const canvasE = canvasElement.value;\n    if (videoE && canvasE) onResize(canvasE, videoE);\n  }\n  onMounted(() => {\n    window.addEventListener('resize', resizeCanvas);\n    nextTick(resizeCanvas);\n  });\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', resizeCanvas);\n  });\n  return resizeCanvas;\n}\n\nfunction setupVideoPlaying(\n  videoElement: Ref<HTMLVideoElement | null>,\n  startTime: Ref<number>,\n  endTime: Ref<number>,\n  startProgressUpdating: () => void,\n) {\n  function playVideo(\n    from: number,\n    to: number,\n    speed: number,\n  ) {\n    console.log(`VideoPlayer :: Starting playback from ${from} to ${to} @ ${speed.toPrecision(2)}`);\n\n    // eslint-disable-next-line no-param-reassign\n    startTime.value = from;\n    // eslint-disable-next-line no-param-reassign\n    endTime.value = to;\n\n    const videoE = videoElement.value;\n    if (!videoE) {\n      console.error(\"VideoE is null - can't start playback\");\n      return;\n    }\n\n    videoE.pause();\n    videoE.playbackRate = speed;\n    videoE.currentTime = from;\n\n    nextTick(() => {\n      startProgressUpdating();\n      videoE.play();\n    });\n  }\n\n  return { playVideo };\n}\n\nexport default defineComponent({\n  name: 'VideoPlayer',\n  props: {\n    videoBaseUrl: String,\n    width: String,\n    height: String,\n  },\n  emits: [\n    'playback-completed',\n    'progress',\n  ],\n  setup(props, ctx) {\n    const { videoBaseUrl } = toRefs(props);\n\n    const videoElement = ref(null as null | HTMLVideoElement);\n    const canvasElement = ref(null as null | HTMLCanvasElement);\n\n    const startTime = ref(0);\n    const endTime = ref(0);\n    const videoUrl = computed(() => videoBaseUrl?.value ?? '');\n\n    const resizeCanvas = setupCanvasResizing(videoElement, canvasElement);\n\n    let prevTime = -1;\n    let timerId = -1;\n    function onTimeUpdated() {\n      const vidElement = videoElement.value;\n      if (!vidElement) return;\n\n      const time = vidElement.currentTime;\n      if (time === prevTime) return;\n      prevTime = time;\n\n      ctx.emit('progress', time);\n\n      if (time + 1 / 60 >= endTime.value) {\n        vidElement.pause();\n        console.log('VideoPlauer :: playback-completed');\n        ctx.emit('playback-completed');\n        clearInterval(timerId);\n        timerId = -1;\n      }\n    }\n\n    const startProgressUpdating = () => {\n      if (timerId !== -1) clearInterval(timerId);\n      timerId = setInterval(onTimeUpdated, 1000 / 30);\n    };\n\n    const { playVideo } = setupVideoPlaying(\n      videoElement,\n      startTime,\n      endTime,\n      startProgressUpdating,\n    );\n\n    return {\n      videoUrl,\n      resizeCanvas,\n      videoElement,\n      canvasElement,\n      playVideo,\n      endTime,\n    };\n  },\n  methods: {\n    setTime(time: number) {\n      const videoE = this.videoElement;\n      if (videoE) {\n        videoE.currentTime = time;\n      }\n    },\n  },\n});\n</script>\n\n<style lang=\"scss\">\n.video-player-container {\n  canvas {\n    margin: auto;\n  }\n\n  video {\n    border-radius: 0.25rem;\n  }\n}\n</style>\n","\nimport {\n  computed,\n  defineComponent,\n  toRefs,\n  onMounted,\n  onBeforeUnmount,\n  ref,\n  nextTick,\n  Ref,\n} from 'vue';\n\nfunction onResize(canvasE: HTMLCanvasElement, videoE: HTMLVideoElement) {\n  nextTick(() => {\n    if (!canvasE || !videoE) return;\n\n    // eslint-disable-next-line no-param-reassign\n    if (canvasE.width !== videoE.offsetWidth) canvasE.width = videoE.offsetWidth;\n    // eslint-disable-next-line no-param-reassign\n    if (canvasE.height !== videoE.offsetHeight) canvasE.height = videoE.offsetHeight;\n  });\n}\n\nfunction setupCanvasResizing(\n  videoElement: Ref<null | HTMLVideoElement>,\n  canvasElement: Ref<null | HTMLCanvasElement>,\n) {\n  function resizeCanvas() {\n    const videoE = videoElement.value;\n    const canvasE = canvasElement.value;\n    if (videoE && canvasE) onResize(canvasE, videoE);\n  }\n  onMounted(() => {\n    window.addEventListener('resize', resizeCanvas);\n    nextTick(resizeCanvas);\n  });\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', resizeCanvas);\n  });\n  return resizeCanvas;\n}\n\nfunction setupVideoPlaying(\n  videoElement: Ref<HTMLVideoElement | null>,\n  startTime: Ref<number>,\n  endTime: Ref<number>,\n  startProgressUpdating: () => void,\n) {\n  function playVideo(\n    from: number,\n    to: number,\n    speed: number,\n  ) {\n    console.log(`VideoPlayer :: Starting playback from ${from} to ${to} @ ${speed.toPrecision(2)}`);\n\n    // eslint-disable-next-line no-param-reassign\n    startTime.value = from;\n    // eslint-disable-next-line no-param-reassign\n    endTime.value = to;\n\n    const videoE = videoElement.value;\n    if (!videoE) {\n      console.error(\"VideoE is null - can't start playback\");\n      return;\n    }\n\n    videoE.pause();\n    videoE.playbackRate = speed;\n    videoE.currentTime = from;\n\n    nextTick(() => {\n      startProgressUpdating();\n      videoE.play();\n    });\n  }\n\n  return { playVideo };\n}\n\nexport default defineComponent({\n  name: 'VideoPlayer',\n  props: {\n    videoBaseUrl: String,\n    width: String,\n    height: String,\n  },\n  emits: [\n    'playback-completed',\n    'progress',\n  ],\n  setup(props, ctx) {\n    const { videoBaseUrl } = toRefs(props);\n\n    const videoElement = ref(null as null | HTMLVideoElement);\n    const canvasElement = ref(null as null | HTMLCanvasElement);\n\n    const startTime = ref(0);\n    const endTime = ref(0);\n    const videoUrl = computed(() => videoBaseUrl?.value ?? '');\n\n    const resizeCanvas = setupCanvasResizing(videoElement, canvasElement);\n\n    let prevTime = -1;\n    let timerId = -1;\n    function onTimeUpdated() {\n      const vidElement = videoElement.value;\n      if (!vidElement) return;\n\n      const time = vidElement.currentTime;\n      if (time === prevTime) return;\n      prevTime = time;\n\n      ctx.emit('progress', time);\n\n      if (time + 1 / 60 >= endTime.value) {\n        vidElement.pause();\n        console.log('VideoPlauer :: playback-completed');\n        ctx.emit('playback-completed');\n        clearInterval(timerId);\n        timerId = -1;\n      }\n    }\n\n    const startProgressUpdating = () => {\n      if (timerId !== -1) clearInterval(timerId);\n      timerId = setInterval(onTimeUpdated, 1000 / 30);\n    };\n\n    const { playVideo } = setupVideoPlaying(\n      videoElement,\n      startTime,\n      endTime,\n      startProgressUpdating,\n    );\n\n    return {\n      videoUrl,\n      resizeCanvas,\n      videoElement,\n      canvasElement,\n      playVideo,\n      endTime,\n    };\n  },\n  methods: {\n    setTime(time: number) {\n      const videoE = this.videoElement;\n      if (videoE) {\n        videoE.currentTime = time;\n      }\n    },\n  },\n});\n","import { render } from \"./VideoPlayer.vue?vue&type=template&id=debfbb4a\"\nimport script from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoPlayer.vue?vue&type=script&lang=ts\"\n\nimport \"./VideoPlayer.vue?vue&type=style&index=0&id=debfbb4a&lang=scss\"\nscript.render = render\n\nexport default script","\n\nimport { PauseInfo } from '@/model/DanceLesson';\nimport { defineComponent, ref } from 'vue';\nimport VideoPlayer from './VideoPlayer.vue';\n\nconst DEFAULT_PAUSE_DURATION = 1.5;\n\ntype PlaySegment = {\n  from: number;\n  to: number;\n  speed: number;\n  pause: PauseInfo | null;\n}\nfunction computePlaySegments(from: number, to: number, speed: number, pauses: PauseInfo[]) {\n  const segs: PlaySegment[] = [];\n\n  function nextPauseIndex(prevIndex: number): number {\n    const pTime = Math.max((pauses[prevIndex]?.time ?? 0), from);\n    let pauseIndex = prevIndex + 1;\n    for (; pauseIndex < pauses.length; pauseIndex += 1) {\n      const pi = pauses[pauseIndex];\n      if (pi.time > pTime) break;\n    }\n    return pauseIndex;\n  }\n\n  let segStartTime = from;\n  let pauseIndex = nextPauseIndex(-1);\n  while (pauseIndex < pauses.length) {\n    segs.push({\n      from: segStartTime,\n      to: pauses[pauseIndex].time,\n      speed,\n      pause: pauses[pauseIndex],\n    });\n    segStartTime = pauses[pauseIndex].time;\n    pauseIndex = nextPauseIndex(pauseIndex);\n  }\n  segs.push({\n    from: segStartTime,\n    to,\n    speed,\n    pause: null,\n  });\n\n  return segs;\n}\n\nexport default defineComponent({\n  name: 'PausingVideoPlayer',\n  components: { VideoPlayer },\n  props: {\n    videoSrc: {\n      default: '',\n    },\n  },\n  emits: ['playback-completed', 'progress', 'pause-hit', 'pause-end'],\n  setup(props, { emit }) {\n    const videoPlayer = ref(null as null | typeof VideoPlayer);\n\n    function setTime(time: number) {\n      const vidPlayer = videoPlayer.value;\n      if (vidPlayer) vidPlayer.setTime(time);\n      emit('progress', time);\n    }\n\n    function onProgress(time: number) {\n      emit('progress', time);\n    }\n\n    function playSegment(seg: PlaySegment, delaySecs: number, emitResume?: boolean) {\n      const vidPlayer = videoPlayer.value;\n      if (!vidPlayer) return;\n\n      vidPlayer.setTime(seg.from);\n      setTimeout(() => {\n        if (emitResume) {\n          emit('pause-end');\n        }\n        vidPlayer.playVideo(seg.from, seg.to, seg.speed);\n      }, 1000 * delaySecs);\n    }\n\n    let playingSegments: PlaySegment[] = [];\n    let playingSegmentIndex = 0;\n\n    function play(\n      from: number,\n      to: number,\n      speed: number,\n      pauses: Array<PauseInfo>,\n      playDelaySecs: number,\n    ) {\n      setTime(from);\n      playingSegments = computePlaySegments(from, to, speed, pauses);\n      playingSegmentIndex = 0;\n\n      playSegment(playingSegments[playingSegmentIndex], playDelaySecs);\n    }\n    function onSegmentPlaybackCompleted() {\n      const { pause } = playingSegments[playingSegmentIndex];\n      playingSegmentIndex += 1;\n      if (playingSegmentIndex >= playingSegments.length) {\n        emit('playback-completed');\n        return;\n      }\n\n      if (!pause) throw new Error('Expected there to be a pause obj');\n      const nextSeg = playingSegments[playingSegmentIndex];\n\n      emit('pause-hit', pause);\n      const manualResume = pause.manualResume ?? false;\n      if (!manualResume) {\n        playSegment(nextSeg, pause.pauseDuration ?? DEFAULT_PAUSE_DURATION, true);\n      }\n    }\n\n    return {\n      videoPlayer,\n      setTime,\n      onProgress,\n      onSegmentPlaybackCompleted,\n      play,\n    };\n  },\n});\n","import { render } from \"./PausingVideoPlayer.vue?vue&type=template&id=bd31bbf8\"\nimport script from \"./PausingVideoPlayer.vue?vue&type=script&lang=ts\"\nexport * from \"./PausingVideoPlayer.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport DanceLesson, { PauseInfo } from '@/model/DanceLesson';\nimport {\n  computed, defineComponent, onBeforeUnmount, onMounted, ref, toRefs,\n} from 'vue';\nimport { GestureNames, setupGestureListening, TrackingActions } from '@/services/EventHub';\nimport DanceEntry from '@/model/DanceEntry';\nimport InstructionCarousel, { Instruction } from '@/components/elements/InstructionCarousel.vue';\nimport SegmentedProgressBar, { ProgressSegmentData } from '../elements/SegmentedProgressBar.vue';\nimport PausingVideoPlayer from '../elements/PausingVideoPlayer.vue';\n\nconst ActivityPlayState = Object.freeze({\n  NotStarted: 'NotStarted',\n  Playing: 'Playing',\n  ActivityEnded: 'ActivityEnded',\n});\n\n//\n// TODO!\n//   * Update segment breaks in activity to have the first activity\n//     start time and the last activity end time.\n//\n\nfunction calculateProgressSegments(dance: DanceEntry, lesson: DanceLesson) {\n  if (!lesson) return [];\n\n  let last = undefined as undefined | number;\n  const segs = lesson.segmentBreaks.map((timestamp) => {\n    let segData = undefined as undefined | ProgressSegmentData;\n    if (last !== undefined) {\n      segData = {\n        min: last,\n        max: timestamp,\n        enabled: true,\n      };\n    }\n    last = timestamp;\n    return segData;\n  }).filter((x) => x !== undefined);\n\n  return segs;\n}\n\nconst TRACKING_ID = 'LearningScreen';\n\nexport default defineComponent({\n  components: {\n    SegmentedProgressBar,\n    PausingVideoPlayer,\n    InstructionCarousel,\n  },\n  props: {\n    targetDance: Object,\n    targetLesson: Object,\n  },\n  setup(props, { emit }) {\n    const { targetLesson, targetDance } = toRefs(props);\n\n    const activityState = ref(ActivityPlayState.NotStarted);\n\n    const videoPlayer = ref(null as null | typeof PausingVideoPlayer);\n    const videoTime = ref(0);\n\n    const progressBar = ref(null as null | typeof SegmentedProgressBar);\n\n    const activityId = ref(0);\n    const activity = computed(() => {\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n      return lesson?.activities[activityId.value];\n    });\n    const activityTitle = computed(() => activity.value?.title ?? '');\n    const activityCount = computed(() => {\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n      return lesson?.activities?.length ?? 0;\n    });\n    const hasNextActivity = computed(() => activityCount.value > activityId.value + 1);\n    // eslint-disable-next-line max-len\n    const activityFinished = computed(() => activityState.value === ActivityPlayState.ActivityEnded);\n    const nextActivityTitle = computed(() => {\n      if (!hasNextActivity.value) return 'Finish Lesson';\n      const lesson = targetLesson?.value as unknown as DanceLesson | null;\n\n      const nextActivity = lesson?.activities[activityId.value + 1];\n      return nextActivity?.title ?? 'Unknown';\n    });\n\n    const pauseInstructs = ref([] as Instruction[]);\n    function onPauseHit(pause: PauseInfo) {\n      if (pause.instruction) {\n        pauseInstructs.value.push({\n          id: pause.time,\n          text: pause.instruction,\n        });\n      }\n    }\n    function onPauseEnded() {\n      // Remove all pause instructions\n      pauseInstructs.value.splice(0);\n    }\n\n    const instructions = computed(() => {\n      const mActivity = activity.value;\n      const state = activityState.value;\n      if (!mActivity) return [];\n\n      const instructs: Instruction[] = [];\n\n      if (mActivity.staticInstruction) {\n        instructs.push({\n          id: 0,\n          text: mActivity.staticInstruction,\n        });\n      }\n\n      if (state === ActivityPlayState.NotStarted && mActivity.startInstruction) {\n        instructs.push({\n          id: 1,\n          text: mActivity.startInstruction,\n        });\n      } else if (state !== ActivityPlayState.NotStarted && mActivity.playingInstruction) {\n        instructs.push({\n          id: 2,\n          text: mActivity.playingInstruction,\n        });\n      }\n\n      return instructs;\n    });\n    const timedInstructions = computed(() => {\n      const mActivity = activity.value;\n      const time = videoTime.value;\n      if (!mActivity) return [];\n\n      const activeTimedInstructions = mActivity.timedInstructions?.map(\n        (ti, i) => ({\n          id: i,\n          text: ti.text,\n          start: ti.startTime,\n          end: ti.endTime,\n        })\n      ).filter((ti) => ti.start <= time && time < ti.end) ?? [];\n\n      return activeTimedInstructions;\n    });\n\n    const progressSegments = computed(() => {\n      const lesson = targetLesson?.value as DanceLesson | undefined;\n      const dance = targetDance?.value as DanceEntry | undefined;\n      if (lesson && dance) return calculateProgressSegments(dance, lesson);\n      return [];\n    });\n\n    function playActivity() {\n      console.log(`LEARNING SCREEN:: Starting playback (activityId: ${activityId.value})`);\n      activityState.value = ActivityPlayState.Playing;\n      const vidPlayer = videoPlayer.value;\n      const vidActivity = activity.value;\n      if (!vidPlayer || !vidActivity) {\n        console.error('LEARNING SCREEN:: Aborting video playback: videoElement or lessonActivity is null', vidPlayer, vidActivity);\n        return;\n      }\n\n      vidPlayer.play(\n        vidActivity.startTime,\n        vidActivity.endTime,\n        (vidActivity.practiceSpeeds ?? [1])[0] ?? 1,\n        vidActivity.pauses ?? [],\n        1.5,\n      );\n    }\n\n    function gotoNextActivity() {\n      activityState.value = ActivityPlayState.NotStarted;\n      if (!hasNextActivity.value) {\n        emit('lesson-completed');\n        return;\n      }\n      activityId.value += 1;\n      setTimeout(() => { playActivity(); }, 1000);\n    }\n\n    function onActivityFinished() {\n      activityState.value = ActivityPlayState.ActivityEnded;\n      console.log('LEARNING SCREEN:: Activity finished. Requesting tracking...');\n      TrackingActions.requestTracking(TRACKING_ID);\n    }\n\n    setupGestureListening({\n      [GestureNames.pointRight]: () => {\n        TrackingActions.endTrackingRequest(TRACKING_ID);\n        if (!activityFinished.value) return;\n        gotoNextActivity();\n      },\n      [GestureNames.pointLeft]: () => {\n        TrackingActions.endTrackingRequest(TRACKING_ID);\n        if (!activityFinished.value) return;\n        playActivity();\n      },\n    });\n    onBeforeUnmount(() => {\n      TrackingActions.endTrackingRequest(TRACKING_ID);\n    });\n    // Todo: quit tracking request when component unmounted. (perhaps\n    //       refactor tracking requests to have an id)\n\n    function onTimeChanged(time: number) {\n      videoTime.value = time;\n    }\n\n    onMounted(() => {\n      setTimeout(() => {\n        playActivity();\n      }, 1000);\n    });\n\n    return {\n      activityState,\n      progressSegments,\n      activity,\n      activityId,\n      activityCount,\n      activityTitle,\n      nextActivityTitle,\n      instructions,\n      timedInstructions,\n      videoPlayer,\n      progressBar,\n      activityFinished,\n      videoTime,\n      onActivityFinished,\n      onTimeChanged,\n\n      onPauseHit,\n      onPauseEnded,\n    };\n  },\n});\n","import { render } from \"./LearningScreen.vue?vue&type=template&id=02c2f59a\"\nimport script from \"./LearningScreen.vue?vue&type=script&lang=ts\"\nexport * from \"./LearningScreen.vue?vue&type=script&lang=ts\"\n\nimport \"./LearningScreen.vue?vue&type=style&index=0&id=02c2f59a&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n   <div class=\"webcam-prompt-card vcenter-parent\" >\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-header-title\">\n            Webcam Access Needed\n            </h3>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"content\">\n              <p>\n                During the lesson, you'll step back from your computer\n                and control this app with gestures. Later on, we'll also\n                use your webcam to give you tips on your technique.\n              </p>\n              <p class=\"notification is-warning\">\n                Please <strong>stop other programs that are using your webcam</strong>. On most computers, only one app is able to use the webcam at a time.\n              </p>\n              <p>\n                <strong>To continue, please grant access to your webcam.</strong>\n              </p>\n            </div>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"buttons is-right\">\n              <a @click=\"$emit('cancelSelected')\" class=\"is-inverted button is-danger\">\n                Cancel\n              </a>\n              <a @click=\"$emit('startWebcamSelected')\" class=\"button is-primary\">\n                Start Webcam\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n</template>\n\n<script>\n\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'WebcamPromptCard',\n});\n</script>\n\n<style lang=\"scss\">\n\n.webcam-prompt-card .content {\n  max-width: 60ch;\n  text-align: left;\n}\n</style>\n","import { render } from \"./WebcamPromptCard.vue?vue&type=template&id=07a96404\"\nimport script from \"./WebcamPromptCard.vue?vue&type=script&lang=js\"\nexport * from \"./WebcamPromptCard.vue?vue&type=script&lang=js\"\n\nimport \"./WebcamPromptCard.vue?vue&type=style&index=0&id=07a96404&lang=scss\"\nscript.render = render\n\nexport default script","\nimport { defineComponent, ref } from 'vue';\nimport webcamProvider from '@/services/WebcamProvider';\nimport CameraSurface from './components/CameraSurface.vue';\nimport OnboardingUI from './components/OnboardingUI.vue';\nimport DanceMenu from './components/screens/DanceMenu.vue';\nimport LearningScreen from './components/screens/LearningScreen.vue';\nimport DanceEntry, { LessonSelection } from './model/DanceEntry';\nimport DanceLesson from './model/DanceLesson';\nimport WebcamPromptCard from './components/elements/WebcamPromptCard.vue';\n\nconst State = {\n  DanceMenu: 'DanceMenu',\n  PromptStartWebcam: 'PromptStartWebcam',\n  StartingWebcam: 'StartingWebcam',\n  LoadingTracking: 'LoadingTracking',\n  Onboarding: 'Onboarding',\n  LessonActive: 'LessonActive',\n};\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    CameraSurface,\n    OnboardingUI,\n    DanceMenu,\n    LearningScreen,\n    WebcamPromptCard,\n  },\n  setup() {\n    const state = ref(State.DanceMenu);\n    const cameraSurface = ref(null as typeof CameraSurface | null);\n    const hasCompletedOnboarding = ref(false);\n\n    const currentDance = ref(null as DanceEntry | null);\n    const currentLesson = ref(null as DanceLesson | null);\n\n    function danceSelected(sel: LessonSelection) {\n      currentDance.value = sel.dance;\n      currentLesson.value = sel.lesson;\n\n      if (webcamProvider.hasStartedWebcam()) state.value = State.LessonActive;\n      else state.value = State.PromptStartWebcam;\n    }\n\n    function goHome() {\n      state.value = State.DanceMenu;\n      currentDance.value = null;\n      currentLesson.value = null;\n    }\n\n    async function startTracking() {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const camSurface: any = cameraSurface.value;\n      state.value = State.LoadingTracking;\n      camSurface.startTracking();\n    }\n\n    async function startWebcam() {\n      console.log('Starting Webcam');\n\n      if (!webcamProvider.hasStartedWebcam()) {\n        state.value = State.StartingWebcam;\n\n        try {\n          await webcamProvider.startWebcam();\n        } catch (e) {\n          console.error(\"Couldn't start webcam\", e);\n          return;\n        }\n      }\n\n      state.value = State.LoadingTracking;\n      try {\n        await startTracking();\n      } catch (e) {\n        console.error(\"Couldn't start tracking\", e);\n      }\n    }\n\n    function onTrackingAttained() {\n      console.log('Tracking attained');\n      if (hasCompletedOnboarding.value) {\n        state.value = State.LessonActive;\n      } else state.value = State.Onboarding;\n    }\n\n    return {\n      currentDance,\n      currentLesson,\n      danceSelected,\n      goHome,\n      startWebcam,\n      onTrackingAttained,\n      state,\n      cameraSurface,\n      State,\n    };\n  },\n});\n","import { render } from \"./App.vue?vue&type=template&id=9efbb880\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=9efbb880&lang=scss\"\nscript.render = render\n\nexport default script","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker';\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        'App is being served from cache by a service worker.\\n'\n        + 'For more details, visit https://goo.gl/AFskqB',\n      );\n    },\n    registered() {\n      console.log('Service worker has been registered.');\n    },\n    cached() {\n      console.log('Content has been cached for offline use.');\n    },\n    updatefound() {\n      console.log('New content is downloading.');\n    },\n    updated() {\n      console.log('New content is available; please refresh.');\n    },\n    offline() {\n      console.log('No internet connection found. App is running in offline mode.');\n    },\n    error(error) {\n      console.error('Error during service worker registration:', error);\n    },\n  });\n}\n","import { createApp } from 'vue';\n\nimport App from './App.vue';\n\nimport './registerServiceWorker';\n\nconst app = createApp(App);\napp.mount('#app');\n"],"sourceRoot":""}